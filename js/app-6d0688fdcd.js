/**
 * slotwo - slotwo Project Generated from HotTowel Angular
 * @authors 
 * @version v0.0.0
 * @link 
 * @license 
 */
!function(){"use strict";angular.module("app",["app.core","app.widgets","app.admin","app.main","app.inventory","app.town","app.player","app.enemy","app.level","app.message","app.template","app.dialogue","app.progress","app.resources","app.monk","app.book","app.saving","app.statistics"])}(),function(){"use strict";angular.module("app.admin",["app.core","app.widgets"])}(),function(){"use strict";angular.module("app.map",[])}(),function(){"use strict";angular.module("blocks.exception",["blocks.logger"])}(),function(){"use strict";angular.module("blocks.logger",[])}(),function(){"use strict";angular.module("blocks.router",["ui.router","blocks.logger"])}(),function(){"use strict";angular.module("app.book",["app.progress","app.enemy"])}(),function(){"use strict";angular.module("app.core",["ngAnimate","ngSanitize","blocks.exception","blocks.logger","blocks.router","ui.router","ngplus"])}(),function(){"use strict";angular.module("app.dialogue",["app.progress","app.main","app.monk","app.resources","app.inventory","app.statistics"])}(),function(){"use strict";angular.module("app.enemy",["app.inventory","app.message","app.progress","app.resources"])}(),function(){"use strict";angular.module("app.inventory",["app.player","app.progress"])}(),function(){"use strict";angular.module("app.level",["app.enemy","app.message","app.inventory"])}(),function(){"use strict";angular.module("app.main",["app.player","app.level","app.shop","app.template","app.dialogue","app.resources","app.progress","app.saving","app.statistics"])}(),function(){"use strict";angular.module("app.message",["app.main"])}(),function(){"use strict";angular.module("app.monk",["app.progress","app.message"])}(),function(){"use strict";angular.module("app.player",["app.message","app.progress"])}(),function(){"use strict";angular.module("app.progress",[])}(),function(){"use strict";angular.module("app.resources",["app.inventory","app.progress"])}(),function(){"use strict";angular.module("app.saving",["app.progress","app.inventory","app.player","app.resources"])}(),function(){"use strict";angular.module("app.shop",["app.player","app.inventory","app.resources"])}(),function(){"use strict";angular.module("app.statistics",[])}(),function(){"use strict";angular.module("app.template",[])}(),function(){"use strict";angular.module("app.town",[])}(),function(){"use strict";angular.module("app.widgets",[])}(),function(){"use strict";function e(e){function t(){e.info("Activated Admin View")}var i=this;i.title="Admin",t()}angular.module("app.admin").controller("AdminController",e),e.$inject=["logger"]}(),function(){"use strict";function e(e){e.configureStates(t())}function t(){return[{state:"admin",config:{url:"/admin",templateUrl:"app/admin/admin.html",controller:"AdminController",controllerAs:"vm",title:"Admin",settings:{nav:2,content:'<i class="fa fa-lock"></i> Admin'}}}]}angular.module("app.admin").run(e),e.$inject=["routerHelper"]}(),function(){"use strict";function e(){function e(){}var t=this;t.title="MapController",e()}angular.module("app.map").controller("MapController",e),e.$inject=[]}(),function(){"use strict";function e(e){e.configureStates(t())}function t(){return[{state:"map",config:{url:"/map",templateUrl:"app/map/map.html",controller:"MapController",controllerAs:"vm",title:"map"}}]}angular.module("app.map").run(e),e.$inject=["routerHelper"]}(),function(){"use strict";function e(){this.config={appErrorPrefix:void 0},this.configure=function(e){this.config.appErrorPrefix=e},this.$get=function(){return{config:this.config}}}function t(e){e.decorator("$exceptionHandler",i)}function i(e,t,i){return function(a,n){var o=t.config.appErrorPrefix||"",s={exception:a,cause:n};a.message=o+a.message,e(a,n),i.error(a.message,s)}}angular.module("blocks.exception").provider("exceptionHandler",e).config(t),t.$inject=["$provide"],i.$inject=["$delegate","exceptionHandler","logger"]}(),function(){"use strict";function e(e,t){function i(i){return function(a){var n,o;return a.data&&a.data.description&&(n="\n"+a.data.description,o=i+n),a.data.description=o,t.error(o),e.reject(a)}}var a={catcher:i};return a}angular.module("blocks.exception").factory("exception",e),e.$inject=["$q","logger"]}(),function(){"use strict";function e(e,t){function i(e,t,i){}function a(e,t,i){}function n(e,t,i){}function o(e,t,i){}var s={showToasts:!0,error:i,info:a,success:n,warning:o,log:e.log};return s}angular.module("blocks.logger").factory("logger",e),e.$inject=["$log","toastr"]}(),function(){"use strict";function e(e,t,i){function a(e,a,o,s){function r(e,a){e.forEach(function(e){e.config.resolve=angular.extend(e.config.resolve||{},n.resolveAlways),t.state(e.state,e.config)}),a&&!m&&(m=!0,i.otherwise(a))}function _(){a.$on("$stateChangeError",function(t,i,a,n,o,r){if(!u){p.errors++,u=!0;var _=i&&(i.title||i.name||i.loadedTemplateUrl)||"unknown target",l="Error routing to "+_+". "+(r.data||"")+". <br/>"+(r.statusText||"")+": "+(r.status||"");s.warning(l,[i]),e.path("/")}})}function l(){_(),h()}function c(){return o.get()}function h(){a.$on("$stateChangeSuccess",function(e,t,i,o,s){p.changes++,u=!1;var r=n.docTitle+" "+(t.title||"");a.title=r})}var u=!1,m=!1,p={errors:0,changes:0},d={configureStates:r,getStates:c,stateCounts:p};return l(),d}var n={docTitle:void 0,resolveAlways:{}};e.html5Mode(!0),this.configure=function(e){angular.extend(n,e)},this.$get=a,a.$inject=["$location","$rootScope","$state","logger"]}angular.module("blocks.router").provider("routerHelper",e),e.$inject=["$locationProvider","$stateProvider","$urlRouterProvider"]}(),function(){"use strict";function e(e,t){var i=this;i.enemyArray=t.enemyArray,i.enemyProgress=e.progress.enemies,i.enemyLooted=e.progress.looted}angular.module("app.book").controller("BookController",e),e.$inject=["progressService","bookService"]}(),function(){"use strict";function e(e){function t(){for(var t=[],a=0;a<i.length;a++){var n=new e[i[a]];t.push(n)}return t}var i=e.keys;this.enemyArray=t();new e.Bear}angular.module("app.book").service("bookService",e),e.$inject=["enemyService"]}(),function(){"use strict";function e(e){e.options.timeOut=4e3,e.options.positionClass="toast-bottom-right"}function t(e,t,i){e.debugEnabled&&e.debugEnabled(!0),i.configure(a.appErrorPrefix),t.configure({docTitle:a.appTitle+": "})}var i=angular.module("app.core");i.config(e),e.$inject=["toastr"];var a={appErrorPrefix:"[slotwo Error] ",appTitle:"slotwo"};i.value("config",a),i.config(t),t.$inject=["$logProvider","routerHelperProvider","exceptionHandlerProvider"]}(),function(){"use strict";angular.module("app.core").constant("toastr",toastr).constant("moment",moment)}(),function(){"use strict";function e(e){var i="/404";e.configureStates(t(),i)}function t(){return[{state:"404",config:{url:"/404",templateUrl:"app/core/404.html",title:"404"}}]}angular.module("app.core").run(e),e.$inject=["routerHelper"]}(),function(){"use strict";function e(e,t,i,a){function n(){return t.when(72)}function o(){function t(e){return e.data}function a(e){return i.catcher("XHR Failed for getPeople")(e)}return e.get("/api/people").then(t)["catch"](a)}var s={getPeople:o,getMessageCount:n};return s}angular.module("app.core").factory("dataservice",e),e.$inject=["$http","$q","exception","logger"]}(),function(){"use strict";function e(e,t,i,a,n){function o(){"undefined"!=typeof r.currentDialogue.special&&r.currentDialogue.special()}function s(){var e=i.currentLocation,t=e.dialogue,a=t.initDialogue();r.passcode="",r.currentDialogue=t.dialogue[a],r.locationText=r.currentDialogue.text,o()}var r=this;e.initAllDialogues(),s(),r.passText="You have the passcode?",r.switchTemplate=function(e){i.switchTemplate(e)},r.switchDialogue=function(t,i){r.currentMaster=e[i],r.currentDialogue=r.currentMaster.dialogue[t],r.locationText=r.currentDialogue.text,o()},r.switchLevel=function(e){r.currentLocation=i.switchLevel(e)},r.passSubmit=function(){r.passcode=r.passcode.toUpperCase(),"AQKX"===r.passcode?(r.passComplete=!0,t.progress.passCode=!0,a.itemDictionary.sweetJacket[1][1]=1,n.startFireBase("riddle"),r.passText="Nice!  Thats the passcode alright.  You solved my riddle, now here is your prize. *The man hands you a [Sweet Jacket]!*"):r.passText="Hey! Thats not the passcode!"}}angular.module("app.dialogue").controller("DialogueController",e),e.$inject=["dialogueService","progressService","mainService","inventoryService","statisticsService"]}(),function(){"use strict";function e(e,t,i,a,n,o){function s(){var e={offense:0,defense:0,healing:0};return e}var r=this;r.locationText="",r.resources=a.resources,r.progress=e.progress,r.player=i.player,r.itemDictionary=n.itemDictionary,r.Dialogue=function(){this.initDialogue=function(){return"introduction"}},r.arena=new r.Dialogue,r.arena.setDialogue=function(){var e={introduction:{text:"Welcome to the arena!  I am Abner; Owner, showman, and gentleman!  We are still taking contestants for tonights show if you are interested.  Defeat your opponent and win passage across The Bridge!  Or, if you just need to train, I can hook you up.",buttons:{fight:{text:"I am here to fight.",next:"fight",active:!0,master:"arena"},train:{text:"Hook me up with training!",next:"train",active:!r.progress.freeSample,master:"arena"},buy:{text:"I need some more training formula ("+a.resources.milkPrice+"g)",next:"buy",active:r.progress.freeSample&&a.canBuyMilk(),master:"arena"},notEnoughMoney:{text:"I need some more training formula ("+a.resources.milkPrice+"g)",next:"notEnoughMoney",active:r.progress.freeSample&&!a.canBuyMilk(),master:"arena"},secret:{text:"Whats the secret to the formula?",next:"secret",active:r.progress.freeSample&&!r.progress.signedNDA,master:"arena"},skeleton:{text:"Are you a skeleton?",next:"skeleton",active:!0,master:"arena"}}},notEnoughMoney:{text:"Sorry! You are going to need more money than that.  Current price is "+a.resources.milkPrice+"g.","continue":!0,next:"introduction",master:"arena",special:function(){r.initAllDialogues()}},secret:{text:"I will only share my secret once you sign this NDA!  I cant risk a product this good.",buttons:{sign:{text:"Sign the NDA",next:"sign",master:"arena",active:!0},refuse:{text:"Im not signing anything.",next:"refuse",master:"arena",active:!0}}},buy:{text:"Alright one bottle coming up!",next:"introduction","continue":!0,master:"arena",special:function(){r.player.baseHealth=r.player.baseHealth+50,r.player.maxHealth=r.player.calculateTotalHealth(),a.resources.money=a.resources.money-a.resources.milkPrice,a.raiseMilkPrice(),r.initAllDialogues()}},refuse:{text:"Your loss!  Ill keep this NDA handy if you change your mind.",next:"introduction",master:"arena",active:!0,"continue":!0},sign:{text:'Alright heres the scoop.  You know the animal "cow" right?  Well I found that lady cows can excreet white fluid.  I took a drink of it and I was in utter shock!  Every glass of this stuff makes you healthier.  My bones have never been stronger!',next:"introduction","continue":!0,master:"arena",special:function(){o.startFireBase("nda"),r.progress.signedNDA=!0,r.initAllDialogues()}},fight:{text:"The match tonight is against a swarm of Giant Bugs!  Win your match and you gain passage to The Bridge.  Its a fullhouse tonight, give them a show!","continue":!0,level:"arena"},train:{text:"Splendid! Here is a free sample of my special training formula, after that one I will have to charge you gold.  Drink up!","continue":!0,next:"introduction",master:"arena",special:function(){r.player.baseHealth=r.player.baseHealth+50,r.player.maxHealth=r.player.calculateTotalHealth(),r.progress.freeSample=!0,r.initAllDialogues()}},skeleton:{text:"Why yes I am.  You dont have a problem with that do you?","continue":!0,master:"arena",next:"introduction"}};return e},r.wizard=new r.Dialogue,r.wizard.initDialogue=function(){return r.progress.lichReveal?"lich":r.progress.wizardMet?"question":"introduction"},r.wizard.ascii="regular",r.wizard.setDialogue=function(){var e={introduction:{text:"Oh hello.  If I had known you were coming I would have disabled my snowmen sentries!",next:"question",special:function(){r.progress.levels.snowNorth=!0,o.startFireBase("gary")},buttons:{kill:{text:"Dont worry, they were no problem.",next:"kill",active:!0,master:"wizard"},sorry:{text:"Sorry for killing your buddies...",next:"sorry",active:!0,master:"wizard"}}},kill:{text:"Wow! You must be pretty strong to withstand Garys chilly attack!",next:"introFinish","continue":"true",master:"wizard",special:function(){o.startFireBase("gary")}},sorry:{text:"They arent my buddies.  They are magic!  You must be strong if you can take down Gary though!",buttons:{intel:{text:"What if they are intelligent and conscious?!",next:"intel",active:!0,master:"wizard"},cool:{text:"Cool! Guilt free killing!",next:"cool",active:!0,master:"wizard"},introFinish:{text:"Alright...",next:"introFinish",active:!0,master:"wizard"}}},cool:{text:"Yeah it is pretty great, although sometimes I run low on mana after killing too many! Oops~",next:"introFinish",master:"wizard","continue":!0},intel:{text:"Oh man.  When a creature created by magic has gone rogue its a real problem.  It is wizard code to disable them.  Or maybe it is just my code?  Who cares!",buttons:{rip:{text:"I am sorry Gary and friends ;-;",next:"rip",active:!0,master:"wizard"},introFinish:{text:"Oh, okay!",next:"introFinish",active:!0,master:"wizard"}}},rip:{text:"* Gary and his friends cast Snowmens Blessing on you, as a thank you for acknowledging them ;-; *",special:function(){r.itemDictionary.snowmenBlessing[1][1]=1,o.startFireBase("blessing"),n.findVal(),r.player.maxHealth=r.player.calculateTotalHealth()},"continue":!0,next:"introFinish",master:"wizard"},introFinish:{text:"Anyway, welcome to my home!  I am the wizard of this land.","continue":!0,next:"question",master:"wizard",special:function(){r.progress.wizardMet=!0,r.initAllDialogues()}},question:{text:"Well, you came here for a reason right?  What do you need?",buttons:{whatsItLike:{text:"Whats it like to be a wizard?",next:"whatsItLike",master:"wizard",active:!0},sky:{text:"Whats the deal with the sky attack?",next:"sky",master:"wizard",active:!r.progress.wizardTask},task:{text:"What did you want me to do?",next:"task",master:"wizard",active:r.progress.wizardTask&&!r.progress.vialTaken},bear:{text:"Why do you live in a giant bear?",next:"bear",master:"wizard",active:!0},vial:{text:"I found this in the meteorite",next:"vial",master:"wizard",active:r.progress.vialTaken}}},vial:{text:"Quick...  Hand that vial to me!",next:"giveVial",master:"wizard","continue":!0,special:function(){o.startFireBase("robot")}},giveVial:{text:"*You hand the wizard the vial*",next:"doom",master:"wizard","continue":!0},doom:{text:"Yes...  THE PHYLACTERY! Finally!","continue":!0,next:"doom2",master:"wizard"},doom2:{text:"*The wizard starts casting a strange spell on the vial*","continue":!0,next:"doom3",master:"wizard",special:function(){r.wizard.ascii="spell"}},doom3:{text:"I can feel the power!  The power of...","continue":!0,next:"doom4",master:"wizard"},doom4:{text:"THE LICH","continue":!0,next:"memory",master:"wizard",special:function(){r.wizard.ascii="lich",r.progress.lichReveal=!0}},memory:{text:"*Flashes of your memory return, dark memories of THE LICH.*",next:"lich","continue":!0,master:"wizard"},lich:{text:"I am awoken.  KNEEL before me mortal filth.",buttons:{trick:{text:"You tricked me!",next:"trick",master:"wizard",active:!0},never:{text:"I will never kneel to you, LICH SCUM",next:"never",master:"wizard",active:!0}}},trick:{text:"No, the wizard tricked you.  His soul was an offering.  KNEEL before me or join him!",buttons:{never:{text:"I will never kneel to you, LICH SCUM",next:"never",master:"wizard",active:!0}}},never:{text:"FOOL.  This world will fall beneath my might, as many have before it!","continue":!0,next:"memory2",master:"wizard"},memory2:{text:"*Memories of other worlds return, tainted by THE LICH...","continue":!0,next:"end",master:"wizard"},end:{text:"Y O U ~ W I L L ~ P E R I S H","continue":!0,level:"theEnd"},task:{text:"Head to the northern mountains, take out the giant robot, and bring me a sample of the meteorite!",next:"question","continue":!0,master:"wizard"},bear:{text:"Because I can!  It has been my dream since I was a wee wizard to live in a bear.  Maybe you can too someday! Probably not though.","continue":!0,next:"question",master:"wizard"},whatsItLike:{text:"Sorry man, I cant even explain how great it is.  It is something you just have to experience.  Too bad you never will haha!","continue":!0,next:"question",master:"wizard"},sky:{text:"Is that what the commoners are calling it?  Well it was a meteor of some sort.  However!  There is some type of giant robot protecting the meteor!","continue":!0,next:"robot",master:"wizard"},robot:{text:"Yeah thats right, a giant robot!  I need someone to take it out for me so I can do research on the meteorite, are you interested?",buttons:{sure:{text:"Sure, I am interested.",next:"sure",active:!0,master:"wizard"},you:{text:"Why dont you kill it?",next:"you",active:!0,master:"wizard"},no:{text:"No thanks.",next:"no",active:!0,master:"wizard"}}},sure:{text:"Awesome!  You need to head to the mountains of the north and take out the robot.  Once he is taken care of, you need to take a sample from the meteorite and bring it back to me.",next:"counting","continue":!0,master:"wizard"},counting:{text:"You should check in with that monk in the mountains who trains people.  Maybe he can teach you another trick to get by.  I am counting on you, this is for very important wizard research!","continue":!0,next:"question",master:"wizard",special:function(){r.progress.wizardTask=!0,r.progress.canLearn=r.progress.canLearn+1,r.progress.levels.robot=!0,r.initAllDialogues()}},you:{text:"Wow!  Do you know anything?  Everyone knows robots are immune to magic, its the first lesson in wizard school! So will you kill the robot for me or what?",buttons:{no:{text:"No thanks.",next:"no",active:!0,master:"wizard"},sure:{text:"Alright, I will do it.",next:"sure",active:!0,master:"wizard"}}},no:{text:"Your loss!  Let me know if you change your mind about the mission.",next:"question","continue":!0,master:"wizard"}};return e},r.cabin=new r.Dialogue,r.cabin.initDialogue=function(){return r.progress.passCode?"complete":"introduction"},r.cabin.setDialogue=function(){var e={introduction:{text:"",input:!0},complete:{text:"Sorry, the riddle is over, please leave.."}};return e},r.treeKing=new r.Dialogue,r.treeKing.initDialogue=function(){return r.progress.treeKingIntro?"question":"introduction"},r.treeKing.setDialogue=function(){var e={introduction:{text:"Greetings, I am King Treemaster.  Welcome to our city, outsider.",next:"question",master:"treeKing","continue":!0,special:function(){r.progress.treeKingIntro=!0}},question:{text:"Now, what can I do for you?",buttons:{workAccepted:{text:"Missing travelers",next:"askWorkAccepted",master:"treeKing",active:r.progress.treeKingWorkAccept&&!r.progress.treeKingWorkHandIn},work:{text:"Any work you need done?",next:"askWork",master:"treeKing",active:!r.progress.treeKingWorkAccept},rumor:{text:"Rumors in the area",next:"askRumor",master:"treeKing",active:!0},compliment:{text:"Compliment",next:"askCompliment",master:"treeKing",active:r.progress.treeKingCompliment}}},askRumor:{text:"Things have been weird since the sky attacked.  Scouts have been going missing and there is even word of weather change in the east.",next:"question",master:"treeKing","continue":!0},askCompliment:{text:"Flattery will get you nowhere with me, outsider.",next:"question",master:"treeKing","continue":!0,special:function(){r.progress.treeKingCompliment=!1,r.treeKing.dialogue=r.treeKing.setDialogue()}},askWork:{text:"Yes, there are some things we need done.  Lately we have had an issue with travelers going missing in the forest. It has caused our trade to slow down and people are starting to feel the shortage of goods.  One of our scouts reported seeing something to the desert north of the forest, perhaps you can start there?",buttons:{accept:{text:"I will find the missing villagers",next:"askWorkAccept",master:"treeKing",active:!0},refuse:{text:"This type of work is beneath me",next:"askWorkRefuse",master:"treeKing",active:!0}}},askWorkAccept:{text:"Great! Please return here if you find anything.",next:"question",master:"treeKing","continue":!0,special:function(){r.progress.treeKingWorkAccept=!0,r.progress.levels.desert=!0,r.treeKing.dialogue=r.treeKing.setDialogue()}},askWorkRefuse:{text:"Well.  It is unfortunate you feel that way, however, this is the only work I have for an outsider.",buttons:{accept:{text:"Alright.. I will search the desert.",next:"askWorkAccept",master:"treeKing",active:!0}}},askWorkAccepted:{text:"Any news from your search in the desert?",buttons:{yes:{text:"Yes, I killed the beast.",next:"askWorkComplete",master:"treeKing",active:r.progress.levels.ruinsCleared},no:{text:"Not yet.",next:"askWorkIncomplete",master:"treeKing",active:!r.progress.levels.ruinsCleared}}},askWorkComplete:{text:"I see.  That is unfortunate what happened to the missing people, but it was expected.  It seems this is more serious than expected.  You should seek the hermit in the mountains, he will be able to teach you more.  The path ahead will be harsh.",next:"question",master:"treeKing","continue":!0,special:function(){r.progress.treeKingWorkHandIn=!0,r.progress.levels.monk=!0,r.progress.canLearn=r.progress.canLearn+1,o.startFireBase("minotaur"),r.initAllDialogues()}},askWorkIncomplete:{text:"I see.  Please act with haste, I dont want anyone else to go missing.",next:"question",master:"treeKing","continue":!0}};return e},r.enchant=new r.Dialogue,r.enchant.initDialogue=function(){return r.progress.elderMet?"welcome":"introduction"},r.enchant.setDialogue=function(){var e={introduction:{text:"Welcome young one. As you may know, I am known as The Elder of Tresabor.  Come in, come in.  Let us have some tea and speak.","continue":!0,next:"choice",master:"enchant",special:function(){r.progress.elderMet=!0}},welcome:{text:"Welcome back, let us continue our discussion.","continue":!0,next:"choice",master:"enchant"},choice:{text:"What wisdom can I offer you?",buttons:{memory:{text:"I lost my memory.",next:"memory",master:"enchant",active:!r.progress.quizTaken},elder:{text:'Is "The Elder" a title?',next:"elder",master:"enchant",active:!0},train:{text:"How can I become stronger",next:"train",master:"enchant",active:!0}}},train:{text:"If you need to become stronger, you need to train.  An old monk friend of mine is living in the mountains.  He can help you learn new abilities.  If you just want to get tougher, the arena will get you in top shape.",special:function(){r.progress.elderLearnPoint||(r.progress.elderLearnPoint=!0,r.progress.levels.arena=!0,r.progress.levels.sea=!0,r.progress.levels.monk=!0,r.progress.canLearn=r.progress.canLearn+1)},next:"choice",master:"enchant","continue":"true"},memory:{text:"I see.  Memory loss is very difficult to handle.  I can help you along but I cannot restore your memories.  What I can do is guide you to your true self.",next:"quizIntro","continue":!0,master:"enchant",special:function(){r.quiz=s()}},quizIntro:{text:"Very well.  I have a few questions that will help us find your true self.  The first question is: You are walking along when you see a man beating a child, what do you do?",buttons:{offense:{text:"I punch the man in the face!",next:"quizTwo",master:"enchant",active:!0,special:function(){r.quiz.offense=r.quiz.offense+1}},defense:{text:"I run in and block the mans next punch.",next:"quizTwo",master:"enchant",active:!0,special:function(){r.quiz.defense=r.quiz.defense+1}},health:{text:"I grab the child and find them a better home.",next:"quizTwo",master:"enchant",active:!0,special:function(){r.quiz.healing=r.quiz.healing+1}}}},quizTwo:{text:"Next question: If you had to choose an animal to be, which animal would you choose?",buttons:{turtle:{text:"A turtle of course!",next:"quizThree",master:"enchant",active:!0,special:function(){r.quiz.defense=r.quiz.defense+1}},lion:{text:"The Mountain Lion",next:"quizThree",master:"enchant",active:!0,special:function(){r.quiz.offense=r.quiz.offense+1}},elephant:{text:"An Elephant",next:"quizThree",master:"enchant",active:!0,special:function(){r.quiz.healing=r.quiz.healing+1}}}},quizThree:{text:"Only two more questions: A thief is running towards you down an alley, how do you stop him?",buttons:{healing:{text:"I chase the thief.  My stamina will beat his.",next:"quizFinal",master:"enchant",active:!0,special:function(){r.quiz.healing=r.quiz.healing+1}},offense:{text:"I catch the thief, I can outrun him.",next:"quizFinal",master:"enchant",active:!0,special:function(){r.quiz.offense=r.quiz.offense+1}},defense:{text:"I brace myself and block his path, he has nowhere to run.",next:"quizFinal",master:"enchant",active:!0,special:function(){r.quiz.defense=r.quiz.defense+1}}}},quizFinal:{text:"Last question: A destitute youth wanders your way, what lesson do you teach him to obtain a better life?",buttons:{offense:{text:"The power of strength.  You can obtain any life with enough power.",next:"result2",master:"enchant",active:!0,special:function(){r.quiz.offense=r.quiz.offense+1}},healing:{text:"Kindness, the knowledge that only compassion will bring happiness.",next:"result2",master:"enchant",active:!0,special:function(){r.quiz.healing=r.quiz.healing+1}},defense:{text:"Resolve.  No one can stop you if you are determined enough.",next:"result2",master:"enchant",active:!0,special:function(){r.quiz.defense=r.quiz.defense+1}}}},result2:{"continue":!0,text:"Alright, that was the last question.  Lets see...",next:"result",master:"enchant"},result:{"continue":!0,next:"choice",master:"enchant",specialText:function(){var e=r.enchant.dialogue.result.special();return e},special:function(){var e=[r.quiz.offense,"offense"];e[0]<r.quiz.defense&&(e=[r.quiz.defense,"defense"]),e[0]<r.quiz.healing&&(e=[r.quiz.healing,"health"]);var t=e[1];t=t.charAt(0).toUpperCase()+t.slice(1),t="true"+t,r.itemDictionary[t][1][1]=1;var i=r.enchant.dialogue.result.pickText(e[1]);return r.progress.quizTaken=!0,n.findVal(),r.initAllDialogues(),i},pickText:function(e){var t="";return"offense"===e?(o.startFireBase("strength"),t="Ok lets figure out these results... Ah yes, it seems you prefer to take the offensive.  You will find great power and strength in the future."):"defense"===e?(o.startFireBase("defense"),t="Oh my, you must prefer to stand your ground instead of fighting.  Your physical and mental defenses will be top quality."):"health"===e&&(o.startFireBase("health"),t="Ahh.. Your true self is leaking kindness.  You will find great friendships and you be in great health."),t}},elder:{text:'Yes, "The Elder" is granted as a title and position to Tresaboras oldest citizen.  Currently, that is me of course!  I have served as The Elder for 29 years now, I was 137 when I was choosen.',buttons:{old:{text:"Wow you are old!",next:"old",active:!0,master:"enchant"},lie:{text:"I am 378 years old. I am The Elder now.",next:"lie",active:!0,master:"enchant"},thank:{text:"Thank you for the explanation.",next:"thank",active:!0,master:"enchant"}}},thank:{text:"You are welcome outsider.  I hope you are enjoying the tea.",next:"choice",master:"enchant","continue":!0},old:{text:"Haha yes I am!","continue":!0,next:"choice",master:"enchant"},lie:{text:"Hm.  It would be wise not to lie young one.  You cannot fool me.",buttons:{joke:{text:"It was a joke!",next:"joke",master:"enchant",active:!0},sorry:{text:"Sorry for lying",next:"sorry",master:"enchant",active:!0}}},joke:{text:"Whatever you need to tell yourself.",next:"choice","continue":!0,master:"enchant"},sorry:{text:"I accept your apology, but please do not lie.",next:"choice","continue":!0,master:"enchant"}};return e},r.monk=new r.Dialogue,r.monk.checkLearn=function(){var e=!1;return r.progress.canLearn>0&&(e=!0),e},r.monk.setDialogue=function(){var e={introduction:{text:"Hey, what are you doing in my cave?","continue":!0,next:"question",master:"monk"},question:{text:"Well, what do you want?",buttons:{angry:{text:"This is the great monk? I am unimpressed.",next:"angry",master:"monk",active:!0},why:{text:"Why did you become a monk?",next:"why",master:"monk",active:!0},train:{text:"Can you teach me?",next:"train",master:"monk",active:r.monk.checkLearn()},trainMore:{text:"When can I learn more?",next:"trainMore",master:"monk",active:!r.monk.checkLearn()}}},trainMore:{text:"You are not ready for more, you might never be!",next:"question",master:"monk","continue":!0},why:{text:"I am just a guy who is a monk for fun.","continue":!0,next:"question",master:"monk"},train:{text:"Hmm, yes I can teach you.  What ability would you like to learn?",buttons:{battle:{text:"Berserk",master:"monk",next:"battleLearn",active:!r.progress.berserk},defense:{text:"Block",master:"monk",next:"defenseLearn",active:!r.progress.shield},health:{text:"Healing",master:"monk",next:"healthLearn",active:!r.progress.healing},nothing:{text:"Nothing for now",next:"question",master:"monk",active:!0}}},battleLearn:{text:"Ok! You can now use Berserk, it will double your damage for a short time! Pretty cool huh?",master:"monk",next:"question","continue":!0,special:function(){t.train("battle"),r.progress.berserk=!0,r.initAllDialogues()}},defenseLearn:{text:"Alright you can now use Block.  It will stop any damage for a short period of time, no matter how strong.",master:"monk",next:"question","continue":!0,special:function(){t.train("defense"),r.progress.shield=!0,r.initAllDialogues()}},healthLearn:{text:"So you want to heal more right?  Well you can use Heal now.  It will give you a burst of health over a few seconds.",master:"monk",next:"question","continue":!0,special:function(){t.train("health"),r.progress.healing=!0,r.initAllDialogues()}},angry:{text:"Ok we can fight if you want I guess...",buttons:{sorry:{text:"Sorry",next:"sorry",master:"monk",active:!0},fight:{text:"Fight",next:"fight",master:"monk",active:!0}}},fight:{text:"*The monk knocks you out instantly, you didnt stand a chance.*",next:"question",master:"monk",special:function(){r.player.health=0},"continue":!0},sorry:{text:"Alright, Ill let it go this time.","continue":!0,next:"question",master:"monk"}};return e},r.slumThugs=new r.Dialogue,r.slumThugs.initDialogue=function(){return r.progress.slumBossMet?"boss":"introduction"},r.slumThugs.setDialogue=function(){var e={introduction:{text:"Hey! You dont belong here. Beat it!",buttons:{leave:{text:"Sorry I will leave!",next:"sorryLeave",master:"slumThugs",active:!0},threaten:{text:"I go where I want.",next:"threaten",master:"slumThugs",active:!0},question:{text:"What is going on here?",next:"question",master:"slumThugs",active:!0}}},sorryLeave:{text:"Thats what I thought.  Now beat it scrub!"},threaten:{text:"Oh man I like this guy! Lets take him to the hideout!","continue":!0,next:"introduction",master:"slumThugsBoss"},question:{text:"Nosy huh?  Here, follow us!","continue":!0,next:"introductionNosy",master:"slumThugsBoss"},boss:{text:"You want to go to the hideout again? Lets go.","continue":!0,next:"bossReturn",master:"slumThugsBoss"}};return e},r.inn=new r.Dialogue,r.inn.initDialogue=function(){return r.progress.innIntro?"question":"introduction"},r.inn.setDialogue=function(){var e={introduction:{text:"Welcome to the best inn in all of Tresabor, The Sleepy Sapling!  You look like you are new here, am I right?","continue":!0,next:"question",master:"inn",special:function(){r.progress.innIntro=!0}},question:{text:"If you need a room to rest in we have one available for 100g a night.  The Sleepy Sapling also has the tastiest pie that you can find, only 50g for a piece!  Due to limited supply it is only one per customer.  Otherwise we can always just chat!",buttons:{rest:{text:"I am a sleepy sapling and need a room.",next:"rest",active:!0,master:"inn"},pie:{text:"Let me get in on some of that pie!",next:"pie",active:!r.progress.pieEaten,master:"inn"},chat:{
text:"Lets chat!",next:"chat",active:!0,master:"inn"}}},rest:{text:"Alright, that will be 100g for a room.  If you cant cover it now, i can put it on your tab.  Sound good?",next:"sleep",buttons:{refuse:{text:"No Thanks.",next:"question",active:!0,master:"inn"},sleep:{text:"Sounds good!",next:"sleep",active:!0,master:"inn",special:function(){a.resources.money=a.resources.money-100,r.player.rest()}}}},sleep:{text:"ZZZzzz",next:"question","continue":!0,master:"inn"},pie:{text:"One slice of Butterscotch Pie coming up!  I wish we could offer more than one per customer, but since the sky event trade with the Northern Empire has been difficult.  I heard the impact was right along the trade route! Anyway, enjoy the pie!",next:"eatPie","continue":!0,master:"inn",special:function(){o.startFireBase("pie")}},eatPie:{text:"*You eat the Butterscotch Pie, it fills you with DETERMINATION.*",next:"question","continue":!0,master:"inn",special:function(){a.resources.money=a.resources.money-50,r.progress.pieEaten=!r.progress.pieEaten,r.initAllDialogues(),r.itemDictionary.pie[1][1]=1,n.findVal(),r.player.maxHealth=r.player.calculateTotalHealth()}},chat:{text:"Alright! What would you like to talk about?",buttons:{sky:{text:"What is your opinion on the sky attacking?",next:"sky",active:!0,master:"inn"},whatToDo:{text:"What is there to do around here?",next:"whatToDo",active:!0,master:"inn"},wizards:{text:"Any wizards around here?",next:"wizards",active:!0,master:"inn"},nothing:{text:"Nothing for now.",next:"nothing",active:!0,master:"inn"}}},nothing:{text:"Oh.  Well I enjoyed our chat while it lasted!",next:"question","continue":!0,master:"inn"},sky:{text:"Hmm, everyone is on edge thinking it was an attack by one of our enemies, but I fear it is far more dangerous. I have heard of people going missing and other strange occurences since that day. Lets change the subject, it worries me to think of the event.",next:"chat","continue":!0,master:"inn"},whatToDo:{text:"Well if you need work, The King usually has something to offer.  Otherwise there is a shop and The Elder on the main level.  Down here there isnt much else.  If you are looking to leave Tresabor then you can checkout the Arena to the east.  I heard you have to be pretty tough to fight there though.",next:"chat",special:function(){r.progress.levels.arena=!0,r.progress.levels.sea=!0},"continue":!0,master:"inn"},wizards:{text:"Wizards huh? I didnt take you for the type.  Well, if you must see one of them, the closest one is to the east across the river.  The Arena guards the bridge though and they only let the toughest through.  If you want my advice, stay away from wizards.",next:"chat","continue":!0,special:function(){r.progress.levels.arena=!0,r.progress.levels.sea=!0},master:"inn"}};return e},r.house=new r.Dialogue,r.house.initDialogue=function(){return r.progress.introComplete?"help":"introduction"},r.house.setDialogue=function(){var e={introduction:{text:"Oh my! you woke up! Do you remember what happened?",buttons:{no:{text:"I dont even know who I am!",next:"memory",active:!0,master:"house"},yes:{text:"Yeah I do!",next:"lie",active:!0,master:"house"}}},help:{text:"What? You are back already?! Get back out there!"},lie:{text:"Well then why did I find you passed out in my yard.  It looked like a few goons had beaten you up.",buttons:{lie2:{text:"Its what all the kids are doing these days.",next:"lie2",active:!0,master:"house"},kid:{text:"Haha I am just kidding! I dont remember a thing!",next:"truth",active:!0,master:"house"}}},lie2:{text:"Ok... Anyway, you cant stay here forever.","continue":!0,next:"question",master:"house"},truth:{text:"Kids and your crazy jokes these days I cant keep up!  What do you mean you cant remember anything?",buttons:{memory:{text:"I dont even know my name.",next:"memory2",active:!0,master:"house"}}},memory:{text:"Oh... I am sorry.  Well, I found you unconcious in my yard the other day.  You were in bad condition, so I nursed you back to health.","continue":!0,master:"house",next:"question"},memory2:{text:"Oh...  I am sorry.","continue":!0,master:"house",next:"question"},question:{text:"Here, take this map.  A short distance north east of here is Tresabor, City in the Tree. The Elder may be able to help with your memory loss and there will be work for you there.  Take this backpack too, I am too old for adventuring now.","continue":!0,master:"house",next:"goodBye",special:function(){r.progress.hasMap=!0,r.progress.introComplete=!0,o.startFireBase("players")}},goodBye:{text:"Goodluck kid, and remember, head north east to Tresabor!"}};return e},r.secret=new r.Dialogue,r.secret.setDialogue=function(){var e={introduction:{text:'*The room is empty.  Carved into the walls is "QAXK"*'}};return e},r.bum=new r.Dialogue,r.bum.setDialogue=function(){var e={introduction:{text:"Hey man, can you spare any gold?  I can give you information in exchange.",buttons:{give:{text:"Sure, I can spare a few",next:"give",master:"bum",active:!0},refuse:{text:"Sorry buddy not today",next:"refuse",master:"bum",active:!0},ignore:{text:"*Ignore the man*",next:"ignore",master:"bum",active:!0}}},give:{text:"",buttons:{100:{text:"Give 100g",next:"tip1",master:"bum",active:r.resources.money>100},1e3:{text:"Give 1000g",next:"tip2",master:"bum",active:r.resources.money>1e3},1e4:{text:"Give 10000g",next:"tip3",master:"bum",active:r.resources.money>1e4},refuse:{text:"Sorry I guess I dont have enough",next:"refuse",master:"bum",active:!0}}},refuse:{text:"Thank you anyway my friend."},ignore:{text:"*You ignore the man, he ignores you back, it gets weird*"},tip1:{text:"Thank you!  Heres a tip, I always see adventurers walk out half naked and die!  Make sure you equip your new armor and weapons!","continue":!0,master:"bum",next:"introduction",special:function(){r.resources.money=r.resources.money-100,r.initAllDialogues()}},tip2:{text:"Thank you!  If you dont have one already, you should pick up a beast compendium.  You can track enemies that you kill and loot!","continue":!0,master:"bum",next:"introduction",special:function(){r.resources.money=r.resources.money-1e3,r.initAllDialogues()}},tip3:{text:"Thank you!  There was a strange group of people down here earlier, someone mentioned that a key to the passcode was 2143.  Whatever that means!","continue":!0,master:"bum",next:"introduction",special:function(){r.resources.money=r.resources.money-1e4,r.initAllDialogues()}}};return e},r.meteor=new r.Dialogue,r.meteor.initDialogue=function(){return r.progress.vialTaken?"rubble":"introduction"},r.meteor.setDialogue=function(){var e={introduction:{text:"*You smash the meteorite open and grab a sample, inside you see a glass vial.*","continue":!0,master:"meteor",next:"grab"},grab:{text:"*You take the vial, only rubble is left.*",special:function(){r.progress.vialTaken=!0}},rubble:{text:"*You already took the vial, only rubble is left.*"}};return e},r.ending=new r.Dialogue,r.ending.setDialogue=function(){var e={introduction:{text:"The Lichs soul has been sealed!  The phylactery is sitting on the ground.","continue":!0,next:"grab",master:"ending"},grab:{text:"*You grab the phylactery.*",next:"end","continue":!0,master:"ending",special:function(){o.startFireBase("finish")}},end:{text:"You can feel The Lichs soul inside, malevolence is slowly leaking into your soul.  If you keep the phylactery, it will corrupt your soul someday.",buttons:{keep:{text:"Take the phylactery",next:"keep",master:"ending",active:!0},hide:{text:"Hide the phylactery",next:"ditch",master:"ending",active:!0},smash:{text:"Smash the phylactery",next:"smash",master:"ending",active:!0}}},keep:{text:"You keep the phylactery, knowing that you will slowly lose yourself to The Lichs power.  Someone has to keep the phylactery safe and hidden.",end:!0,special:function(){o.startFireBase("keep")}},ditch:{text:"You hide the phylactery, your soul will not be corrupted by The Lich.  However, someday someone with a weaker soul, may be find the phylactery and be turned by The Lich.",end:!0,special:function(){o.startFireBase("ditch")}},smash:{text:"You smash the phylactery.  The Lich is too weak to take a physical form.  The Lich preys on the weak, he will leave this world behind.  This world will survive, but others will not be so lucky.",end:!0,special:function(){o.startFireBase("smash")}}};return e},r.slumThugsBoss=new r.Dialogue,r.slumThugsBoss.setDialogue=function(){var e={introduction:{text:"Here we are, you think you have what it takes for our super secret mission huh? Well lets see it then.",buttons:{confused:{text:"I have no idea what you mean",next:"confused",master:"slumThugsBoss",active:!0},confident:{text:"Yeah I do! Lets do this.",next:"confident",master:"slumThugsBoss",active:!0},threaten:{text:"I will mess you dudes up!",next:"threaten",master:"slumThugsBoss",active:!0}}},introductionNosy:{text:"You think you have what it takes for our super secret mission?",buttons:{confused:{text:"Takes to do what?",next:"confused",master:"slumThugsBoss",active:!0},confident:{text:"Yeah I do! Lets do this.",next:"confident",master:"slumThugsBoss",active:!0},threaten:{text:"I will mess you dudes up!",next:"threaten",master:"slumThugsBoss",active:!0}}},confused:{text:"We need someone clean to do a mission for us, that is all I can say for now. Are you in?",active:!0,buttons:{confident:{text:"Sure, lets do this.",next:"confident",master:"slumThugsBoss",active:!0},leave:{text:"This is pretty sketchy...",next:"leave",master:"slumThugsBoss",active:!0}}},leave:{text:"Then beat it kid! We dont have time for scrubs like you."},confident:{text:"Alright!  Here now drink this.  Dont ask any questions.  Hopefully this is the right amount...","continue":!0,active:!0,level:"shroom",special:function(){r.progress.slumBossMet=!0}},threaten:{text:"Ha! You wish.  Get out of here before we sick the guard cat on you.  He doesnt mess around."},bossReturn:{text:"Here we are! Is the mission complete?",buttons:{tryAgain:{text:"I need to try again",next:"lvlReturn",active:!0,master:"slumThugsBoss"},finishQuest:{text:"The vampire king is slain",next:"finishQuest",active:r.progress.levels.shroomFinish,master:"slumThugsBoss"}}},lvlReturn:{text:"Here, drink this again, lets see what you can do!","continue":!0,level:"shroom",active:!0},finishQuest:{text:"Wow!  Thanks for the help.  Now beat it!  Dont tell anyone about this super secret mission."}};return e},r.initAllDialogues=function(){r.treeKing.dialogue=r.treeKing.setDialogue(),r.slumThugs.dialogue=r.slumThugs.setDialogue(),r.slumThugsBoss.dialogue=r.slumThugsBoss.setDialogue(),r.wizard.dialogue=r.wizard.setDialogue(),r.monk.dialogue=r.monk.setDialogue(),r.enchant.dialogue=r.enchant.setDialogue(),r.house.dialogue=r.house.setDialogue(),r.inn.dialogue=r.inn.setDialogue(),r.arena.dialogue=r.arena.setDialogue(),r.secret.dialogue=r.secret.setDialogue(),r.bum.dialogue=r.bum.setDialogue(),r.meteor.dialogue=r.meteor.setDialogue(),r.cabin.dialogue=r.cabin.setDialogue(),r.ending.dialogue=r.ending.setDialogue()}}angular.module("app.dialogue").service("dialogueService",e),e.$inject=["progressService","monkService","playerService","resourcesService","inventoryService","statisticsService"]}(),function(){"use strict";function e(e,t,i,a,n){function o(e,t,a){if(s+=1,r.currentEnemy=t,r.currentEnemy.percent=r.currentEnemy.findHealthPercent(),s%t.attackSpeed===0){var n;if(n=e.evade>0?Math.floor(100*Math.random()):100,n>e.evade){var o=t.damage-t.damage*e.armorValue;e.health=e.health-o,e.health=e.health.toFixed(2)}else i.addMessage("You evade an attack thanks to your [Pocket Sand]!")}return s%e.attackSpeed===0&&(t.health=t.health-e.damage,t.health=t.health.toFixed(1)),t.health<=0&&(r.currentEnemy=""),e.health<=0?void(e.alive=!1):void t.death(a)}var s=0,r=this;r.watch=!1,r.progress=a.progress,r.itemDictionary=e.itemDictionary,r.Enemy=function(){this.ground=!1,this.attackSpeed=2,this.health=10,this.maxHealth=10,this.damage=1,this.regularDamage=1,this.alive=!0,this.move=!0,this.prev=!1,this.prevCheck=!1,this.speed=-1,this.position=[0,0],this.positionOld=[0,0],this.itemMult=1,this.test=!1,this.inCombat=!1,this.phases=!1,this.phaseOne=!1,this.phaseTwo=!1,this.phaseThree=!1,this.moneyMult=1,this.logSeen=function(){r.progress.enemies[this.slug]="undefined"==typeof r.progress.enemies[this.slug]?1:r.progress.enemies[this.slug]+1},this.attackSpeedText=function(){return 2===this.attackSpeed?"average":this.attackSpeed>2?"slow":this.attackSpeed<2?"fast":void 0},this.findHealthPercent=function(){var e=this.health/this.maxHealth;return e>1&&(e=1),this.phaseCheck(e),e},this.phaseCheck=function(e){e=100*e,this.phases&&(this.phaseOne?76>e&&(this.phaseOne=!1,this.phaseOneActivate()):this.phaseTwo?51>e&&(this.phaseTwo=!1,this.phaseTwoActivate()):this.phaseThree&&26>e&&(this.phaseThree=!1,this.phaseThreeActivate()))},this.battleCheck=function(e,t,i){"Y"===i[t.position[1]][t.position[0]+t.speed]&&o(e,t,i)},this.initPosition=function(){this.positionOld=this.position},this.name="default",this.desc="default desc",this.updatePosition=function(e,t,i,a){t[0]=e[0],t[1]=e[1],e[1]=e[1]+a,e[0]=e[0]+i},this.checkLevelEnd=function(e,t){return t[e[1]].length<=e[0]?!0:void 0},this.death=function(e){this.health<=0&&(this.logSeen(),this.alive=!1,this.itemDrop(),this.health=this.fullHealth,this.symbol=this.prevCheck?"_":"")},this.itemDrop=function(){var t=Math.round(100*Math.random()),i=this.moneyDrop();n.resources.money=n.resources.money+i,t<=this.itemChance&&0===this.items[0][1][1]?(this.lootMessage="You find ["+this.items[0][0][1].name+"] and "+i+" gold.",this.items[0][1][1]=1,e.findVal(),r.progress.looted[this.slug]=!0):this.lootMessage="You find "+i+" gold.",this.foundLoot=!0},this.moneyDrop=function(){var e=Math.round(this.moneyMult*(Math.random()+1));return e},this.collisionCheck=function(e,t){var i=this;if(i.alive&&i.move){if(("Y"===e[i.position[1]][i.position[0]+i.speed]||i.inCombat)&&(i.inCombat=!0),i.grounded){i.grounded=!1}if(i.prev?(i.inCombat||(i.prev=!1),i.prevCheck=!0):i.prevCheck=!1,"Y"===e[i.position[1]][i.position[0]+i.speed])r.watch=!0,o(t[0],i,e),i.inCombat=!0;else if(" "!==e[i.position[1]+1][i.position[0]]&&"_"!==e[i.position[1]+1][i.position[0]]||i.prevCheck||i.inCombat)if(" "===e[i.position[1]][i.position[0]+i.speed])this.updatePosition(i.position,i.positionOld,i.speed,0);else if("_"===e[i.position[1]][i.position[0]+i.speed])i.prev=!0,this.updatePosition(i.position,i.positionOld,i.speed,0);else if("_"===e[i.position[1]+1][i.position[0]])i.prev=!1,this.updatePosition(i.position,i.positionOld,0,1);else{for(var a=!1,n=0;n<t.length;n++)e[i.position[1]][i.position[0]+i.speed]===t[n].symbol&&(a=!0);i.prevCheck&&(i.prev=!0),a||(i.prev=!1,this.updatePosition(i.position,i.positionOld,i.speed,-1))}else"_"===e[i.position[1]+1][i.position[0]]&&(i.prev=!0),i.updatePosition(i.position,i.positionOld,0,1)}else{if(!i.alive)return;this.battleCheck(t[0],i,e)}}},r.Tree=function(){this.name="Tree",this.slug="Tree",this.desc="Just a Tree",this.moneyMult=2,this.deathMessage="A Tree has been chopped!",this.symbol="|",this.move=!1,this.maxHealth=10,this.health=10,this.colBox=[3,5],this.items=[r.itemDictionary.bigHeavyWood],this.itemChance=75,this.damage=0},r.Tree.prototype=new r.Enemy,r.Penguin=function(){this.name="Penguin",this.slug="Penguin",this.moneyMult=1,this.desc="Evilest of all birds",this.deathMessage="A penguin has been demolished!",this.symbol="P",this.maxHealth="60",this.health=60,this.items=[r.itemDictionary.polarArmor],this.itemChance=25,this.damage=20,this.attackSpeed=1,this.moneyMult=500},r.Penguin.prototype=new r.Enemy,r.Bear=function(){this.name="Bear",this.slug="Bear",this.desc="A Wandering Bear",this.deathMessage="The Bear has died!",this.symbol="B",this.items=[r.itemDictionary.bearClaws],this.itemChance=25,this.moneyMult=30,this.maxHealth=30,this.health=30,this.damage=20,this.attackSpeed=7},r.Bear.prototype=new r.Enemy,r.Mantis=function(){this.name="Giant Mantis",this.slug="Mantis",this.desc="Pretty scary",this.deathMessage="The Giant Mantis has been squashed!",this.symbol="M",this.items=[r.itemDictionary.mantisClaw],this.itemChance=8,this.maxHealth=70,this.health=70,this.damage=35,this.attackSpeed=2,this.moneyMult=200},r.Mantis.prototype=new r.Enemy,r.StickBug=function(){this.name="Giant Stick Bug",this.slug="StickBug",this.desc="AKA Walking Stick",this.deathMessage="A Giant Stick Bug has been snapped!",this.symbol="T",this.items=[r.itemDictionary.bugExoskeleton],this.itemChance=8,this.maxHealth=80,this.health=80,this.damage=30,this.attackSpeed=3,this.moneyMult=200},r.StickBug.prototype=new r.Enemy,r.Yeti=function(){this.name="Abominable Snowman",this.slug="Yeti",this.symbol="A",this.desc="bouncy",this.items=[r.itemDictionary.abomItem],this.itemChance=35,this.deathMessage="The Yeti has went extinct!",this.move=!1,this.damage=60,this.attackSpeed=3,this.health=1e3,this.maxHealth=1e3,this.moneyMult=600},r.Yeti.prototype=new r.Enemy,r.King=function(){this.name="Vampire King",this.slug="King",this.desc="Weak, but respected",this.deathMessage="The Vampire King has been dethroned!",this.move=!1,this.symbol="K",this.desc="Rules over all vampires",this.items=[r.itemDictionary.kingCrown],this.itemChance=50,this.damage=25,this.health=200,this.moneyMult=300,this.maxHealth=200,this.attackSpeed=3},r.King.prototype=new r.Enemy,r.Vampire=function(){this.move=!1,this.name="Vampire",this.slug="Vampire",this.desc="Dont get bit!",this.deathMessage="A Vampire has been staked!",this.symbol="V",this.items=[r.itemDictionary.vampireTeeth],this.itemChance=20,this.damage=50,this.health=200,this.maxHealth=200,this.moneyMult=100,this.attackSpeed=2},r.Vampire.prototype=new r.Enemy,r.Gorilla=function(){this.name="Desert Gorilla",this.slug="Gorilla",this.desc="They come from under the sand!",this.deathMessage="A Desert Gorilla has been crushed!",this.symbol="G",this.items=[r.itemDictionary.gorillaFoot],this.moneyMult=100,this.itemChance=20,this.maxHealth=50,this.health=50,this.damage=10,this.attackSpeed=4},r.Gorilla.prototype=new r.Enemy,r.GorillaSnow=function(){this.name="Snow Gorilla",this.slug="GorillaSnow",this.desc="Fuzzier than regular Gorillas",this.deathMessage="A Snow Gorilla has been stomped!",this.symbol="G",this.items=[r.itemDictionary.frozenBanana],this.moneyMult=1e3,this.itemChance=20,this.maxHealth=600,this.health=600,this.damage=60,this.attackSpeed=4},r.GorillaSnow.prototype=new r.Enemy,r.Mammoth=function(){this.name="Mini Mammoth",this.slug="Mammoth",this.desc="Like a Mammoth, but smaller",this.deathMessage="A Mini Mammoth has collapsed!",this.symbol="M",this.items=[r.itemDictionary.mammothFur],this.moneyMult=1e3,this.itemChance=25,this.maxHealth=700,this.health=700,this.damage=75,this.attackspeed=5},r.Mammoth.prototype=new r.Enemy,r.DustDevil=function(){this.name="Dust Devil",this.slug="DustDevil",this.desc="Sand Attack!",this.deathMessage="The Dust Devil was blown away!",this.symbol="V",this.items=[r.itemDictionary.pocketSand],this.moneyMult=50,this.itemChance=15,this.maxHealth=40,this.health=40,this.damage=5,this.attackSpeed=2},r.DustDevil.prototype=new r.Enemy,r.Deer=function(){this.name="Deer",this.slug="Deer",this.desc="A Cute Deer",this.items=[r.itemDictionary.deerAntlers],this.deathMessage="A Deer has been killed.",this.itemChance=35,this.moneyMult=10,this.symbol="D",this.maxHealth=15,this.health=15,this.damage=1,this.attackSpeed=1},r.Deer.prototype=new r.Enemy,r.TreeWarrior=function(){this.name="Treeperson Warrior",this.deathMessage="A Treeperson Warrior has been slain!",this.symbol="T",this.maxHealth=30,this.health=30,this.damage=2},r.TreeWarrior.prototype=new r.Enemy,r.Crab=function(){this.move=!1,this.name="Huge Crab",this.slug="Crab",this.deathMessage="RIP the crab is toast.",this.desc="Loves money",this.items=[r.itemDictionary.claws],this.itemChance=50,this.symbol=";",this.moneyMult=1e3,this.maxHealth=500,this.health=500,this.damage=50,this.colBox=[10,5],this.attackSpeed=4},r.Crab.prototype=new r.Enemy,r.Oyster=function(){this.move=!1,this.name="Oyster?",this.slug="Oyster",this.moneyMult=100,this.items=[r.itemDictionary.pearl],this.itemChance=25,this.symbol="o",this.desc="Or is it a Clam?!",this.deathMessage="An Oyster? has been shucked!",this.maxHealth=100,this.health=100,this.damage=20},r.Oyster.prototype=new r.Enemy,r.Ghost=function(){this.name="Ghost of a Prisoner",this.slug="Ghost",this.desc="A lost soul",this.deathMessage="The prisoners soul has been freed.",this.items=[r.itemDictionary.ghostArmor],this.itemChance=20,this.symbol="@",this.maxHealth=15,this.health=15,this.damage=1,this.attackSpeed=1,this.moneyMult=70},r.Ghost.prototype=new r.Enemy,r.Undead=function(){this.name="Undead Husk",this.slug="undead",this.desc="The Lichs only friend",this.deathMessage="An Undead Husk has been destroyed!",this.items=[r.itemDictionary.undeadItem],this.itemChance=20,this.symbol="U",this.damage=65,this.attackSpeed=2,this.health=400,this.maxHealth=400,this.moneyMult=5e3},r.Undead.prototype=new r.Enemy,r.Robot=function(){this.name="Giant Robot",this.desc="beep boop",this.slug="Robot",this.deathMessage="The Robot has been shutdown!",this.items=[r.itemDictionary.robotArmor],this.itemChance=100,this.symbol="c",this.moneyMult=5e3,this.maxHealth=1e4,this.health=1e4,this.damage=50,this.attackSpeed=3,this.colBox=[12,12],this.move=!1,this.phases=!0,this.phaseOne=!0,this.phaseTwo=!0,this.phaseThree=!0,this.phaseOneActivate=function(){function e(){a.health=a.health+250,t(function(){e()},1e3)}i.addMessage('"INITIALIZING REPAIR DRONES."');var a=this;e()},this.phaseTwoActivate=function(){i.addMessage('"TOUGH ENEMY DETECTED. INITIALIZING KILL RAY."'),this.attackSpeed=1,this.damage=60},this.phaseThreeActivate=function(){function e(o){i.addMessage('"CRITICAL DAMAGE. SELF DESTRUCT INITIALIZING IN '+n+' SECONDS"'),n-=1,t(function(){o.alive&&(n>0?e(o):0===n&&a(o))},1e3)}function a(e){i.addMessage('"SELF DESTRUCT INTIALIZED. GOODBYE."'),e.damage=999999,e.health=10}var n=2,o=this;e(o)}},r.Robot.prototype=new r.Enemy,r.Minotaur=function(){this.name="Minotaur",this.slug="Minotaur",this.desc="Smells of death",this.items=[r.itemDictionary.minotaurHammer],this.itemChance=100,this.moneyMult=250,this.deathMessage="The Minotaur has been defeated!",this.symbol=",",this.maxHealth=800,this.health=800,this.damage=20,this.regularDamage=22,this.attackSpeed=9,this.colBox=[15,15],this.move=!1,this.phases=!0,this.phaseOne=!0,this.phaseTwo=!0,this.phaseThree=!0,this.phaseActive=function(e){var a=this;this.damage=2*a.regularDamage,i.addMessage("The "+this.name+" has enraged, dealing extra damage for a few seconds!"),t(function(){var t=a[e];t&&(a.damage=a.regularDamage)},3500)},this.phaseOneActivate=function(){this.phaseActive("phaseTwo")},this.phaseTwoActivate=function(){this.phaseActive("phaseThree")},this.phaseThreeActivate=function(){this.phaseActive()}},r.Minotaur.prototype=new r.Enemy,r.Lich=function(){this.name="The Lich",this.slug="Lich",this.desc="d o o m",this.items=[r.itemDictionary.lichItem],this.itemChance=100,this.deathMessage="",this.symbol="|",this.moneyMult=25e3,this.damage=80,this.attackspeed=2,this.colBox=[35,25],this.move=!1,this.health=6e3,this.maxHealth=6e3,this.playerWarp=!1,this.spawnBuddies=!1,this.phases=!0,this.phaseOne=!0,this.phaseTwo=!0,this.phaseThree=!0,this.phaseOneActivate=function(){this.playerWarp=!0,i.addMessage("The Lich teleports you backwards and summons some friends!")},this.phaseTwoActivate=function(){var e=this,t=2;this.powerBuild(t,e)},this.powerBuild=function(e,a){a.alive&&(e>0?(a.damage=0,a.health=a.maxHealth,i.addMessage("The Lich is building up energy..."),e-=1,t(function(){a.powerBuild(e,a)},1e3)):0===e&&(a.phaseOne=!0,a.damage=99999,i.addMessage("The Lich unleashes a huge attack!"),t(function(){a.damage=80},3e3)))},this.phaseThreeActivate=function(){this.playerWarp=!0,this.attackSpeed=1,i.addMessage("The Lich teleports you backwards and summons some friends!")}},r.Lich.prototype=new r.Enemy,r.Snowman=function(){this.name="Snowman",this.slug="Snowman",this.desc="Part snow, part man.",this.items=[r.itemDictionary.snowmanHat],this.itemChance=25,this.deathMessage="A Snowman has been turned to slush!",this.moneyMult=750,this.symbol="(",this.damage=30,this.attackSpeed=2,this.colBox=[5,3],this.move=!1,this.health=150,this.maxHealth=150},r.Snowman.prototype=new r.Enemy,r.SnowmanBoss=function(){this.name="Gary the Snowman",this.slug="SnowmanBoss",this.moneyMult=1500,this.desc="Just a regular giant guy made of snow.",this.items=[r.itemDictionary.giantCarrot],this.itemChance=100,this.deathMessage="Gary the Snowman has been melted!",this.symbol="\\",this.damage=40,this.maxHealth=2200,this.health=2200,this.attackSpeed=2,this.colBox=[20,20],this.move=!1,this.phases=!0,this.phaseOne=!0,this.phaseOneActivate=function(){var e=this;i.addMessage(this.name+" charges a freezing attack! Stay warm!"),t(function(){r.progress.hasSweater?i.addMessage("You stay toasty in your Winter Sweater!"):(e.damage=1e3,i.addMessage(e.name+"s freezing attack is super cold!"))},1500)}},r.SnowmanBoss.prototype=new r.Enemy,r.keys=["Tree","Deer","Bear","Gorilla","DustDevil","Ghost","Minotaur","Vampire","King","Mantis","StickBug","Oyster","Crab","Penguin","Yeti","Snowman","SnowmanBoss","GorillaSnow","Mammoth","Robot","Undead","Lich"]}angular.module("app.enemy").service("enemyService",e),e.$inject=["inventoryService","$timeout","messageService","progressService","resourcesService"]}(),function(){"use strict";function e(e,t,i){function a(e,t){for(var i=0;i<e.length;i++)0!==e[i][1][1]&&t.push(e[i])}function n(){a(t.armor,o.armor),a(t.weapons,o.weapons)}var o=this;o.itemDictionary=t.itemDictionary,o.player=i.player,o.weapons=[],o.armor=[],o.trinkets=[],o.helm=[],o.otherItems=t.otherItems,o.equippedWeapon=o.player.weapon,o.equippedArmor=o.player.armor,n(),o.equipArmor=function(){o.player.armor=o.itemDictionary[o.equippedArmor][0][1],o.player.armorValue=o.player.armor.armor,o.player.armorCheck=!1,t.findVal()},o.equipWeapon=function(){o.player.weapon=o.itemDictionary[o.equippedWeapon][0][1],o.player.damage=o.player.weapon.damage}}angular.module("app.inventory").controller("InventoryController",e),e.$inject=["$scope","inventoryService","playerService"]}(),function(){"use strict";function e(e){function t(){if(localStorage.itemSave)for(var e=JSON.parse(atob(localStorage.itemSave)),t=JSON.parse(atob(localStorage.potionAmt)),i=0;i<e.length;i++)e[i][1]>0&&("potion"===e[i][0]?a.itemDictionary.potion[1][1]=t:a.itemDictionary[e[i][0]][1][1]=1)}function i(e,t){for(var i=0;i<a.otherItems.length;i++)if(a.otherItems[i][1][1]>0)for(var n=0;n<e.length;n++)"undefined"!=typeof a.otherItems[i][0][1][e[n]]&&(t[e[n]]=t[e[n]]+a.otherItems[i][0][1][e[n]])}var a=this;a.progress=e.progress,a.itemDictionary=[],this.Item=function(){this.buyable=!1,this.removeAfterBuy=!1,this.craftTime=5e3,this.recipe=void 0,this.quantity=0,this.cat="default",this.spawn=void 0,this.name="Default",this.slug=function(){var e=this.name.toLowerCase();return e},this.attackSpeedMessage=function(){var e="";return 2===this.attackSpeed?e="Average Speed":this.attackSpeed>2?e="Slow Speed":this.attackSpeed<2&&(e="Fast Speed"),e}},this.fists=new this.Item,this.fists.name="Fists",this.fists.desc="just some fists",this.fists.damage=1,this.fists.attackSpeed=1,this.fists.slug="fists",this.sword=new this.Item,this.sword.name="Wooden Sword",this.sword.desc="Sourced from 100% Organic Non-GMO Trees",this.sword.buyable=!0,this.sword.removeAfterBuy=!0,this.sword.price=200,this.sword.recipe=["wood-100"],this.sword.cat="weapon",this.sword.damage=4,this.sword.attackSpeed=2,this.sword.slug="sword",this.decentSword=new this.Item,this.decentSword.name="Decent Sword",this.decentSword.desc="It is alright",this.decentSword.buyable=!0,this.decentSword.removeAfterBuy=!0,this.decentSword.price=4e3,this.decentSword.damage=10,this.decentSword.attackSpeed=2,this.decentSword.slug="decentSword",this.bearClaws=new this.Item,this.bearClaws.name="Bear Arms",this.bearClaws.desc="Just like the founding fathers intended",this.bearClaws.damage=2,this.bearClaws.attackSpeed=1,this.bearClaws.slug="bearClaws",this.minotaurHammer=new this.Item,this.minotaurHammer.name="Minotaur Hammer",this.minotaurHammer.desc="This thing is a beast",this.minotaurHammer.damage=30,this.minotaurHammer.attackSpeed=4,this.minotaurHammer.slug="minotaurHammer",this.claws=new this.Item,this.claws.name="Crab Claws",this.claws.slug="claws",this.claws.desc="Big, Meaty, Claws!",this.claws.damage=45,this.claws.attackSpeed=4,this.giantCarrot=new this.Item,this.giantCarrot.name="Giant Carrot",this.giantCarrot.desc="Formerly known as Garys nose",this.giantCarrot.damage=15,this.giantCarrot.attackSpeed=1,this.giantCarrot.slug="giantCarrot",this.giantCarrot.lootOnce=!0,a.itemDictionary.fists=[["item",this.fists],["amount",1]],a.itemDictionary.sword=[["item",this.sword],["amount",0]],a.itemDictionary.decentSword=[["item",this.decentSword],["amount",0]],a.itemDictionary.bearClaws=[["item",this.bearClaws],["amount",0]],a.itemDictionary.minotaurHammer=[["item",this.minotaurHammer],["amount",0]],a.itemDictionary.claws=[["item",this.claws],["amount",0]],a.itemDictionary.giantCarrot=[["item",this.giantCarrot],["amount",0]],this.clothArmor=new this.Item,this.clothArmor.name="Cloth Armor",this.clothArmor.desc="Better than nothing?",this.clothArmor.armor=0,this.clothArmor.slug="clothArmor",this.woodArmor=new this.Item,this.woodArmor.name="Wood Armor",this.woodArmor.desc="Hope for no splinters!",this.woodArmor.cat="armor",this.woodArmor.armor=.15,this.woodArmor.buyable=!0,this.woodArmor.removeAfterBuy=!0,this.woodArmor.price=200,this.woodArmor.slug="woodArmor",this.boneArmor=new this.Item,this.boneArmor.name="Bone Armor",this.boneArmor.desc="Bonez",this.boneArmor.cat="armor",this.boneArmor.armor=.2,this.boneArmor.price=300,this.boneArmor.removeAfterBuy=!0,this.boneArmor.slug="boneArmor",this.polarArmor=new this.Item,this.polarArmor.name="Tuxedo",this.polarArmor.desc="dapper",this.polarArmor.armor=.3,this.polarArmor.slug="polarArmor",this.healthArmor=new this.Item,this.healthArmor.name="health armor",this.healthArmor.desc="health armor",this.healthArmor.armor=0,this.healthArmor.healthMult=2,this.healthArmor.slug="healthArmor",this.ghostArmor=new this.Item,this.ghostArmor.name="Spooky Aura",this.ghostArmor.desc="Feels like a ghost hug <3",this.ghostArmor.armor=0,this.ghostArmor.damageMult=25,this.ghostArmor.slug="ghostArmor",this.robotArmor=new this.Item,this.robotArmor.name="Mech Suit",this.robotArmor.desc="Battle Ready Armor",this.robotArmor.armor=.4,this.robotArmor.damageMult=15,this.robotArmor.slug="robotArmor",this.bugExoskeleton=new this.Item,this.bugExoskeleton.name="Stick Bug Exoskeleton",this.bugExoskeleton.slug="bugExoskeleton",this.bugExoskeleton.desc="Seems useful",this.bugExoskeleton.armor=.5,this.bugExoskeleton.damageMult=-20,this.potionArmor=new this.Item,this.potionArmor.name="Potion Armor",this.potionArmor.desc="Feels like a ghost hug <3",this.potionArmor.armor=0,this.potionArmor.healthRate=20,this.potionArmor.slug="potionArmor",a.itemDictionary.robotArmor=[["item",this.robotArmor],["amount",0]],a.itemDictionary.potionArmor=[["item",this.potionArmor],["amount",0]],a.itemDictionary.ghostArmor=[["item",this.ghostArmor],["amount",0]],a.itemDictionary.woodArmor=[["item",this.woodArmor],["amount",0]],a.itemDictionary.bugExoskeleton=[["item",this.bugExoskeleton],["amount",0]],a.itemDictionary.boneArmor=[["item",this.boneArmor],["amount",0]],a.itemDictionary.healthArmor=[["item",this.healthArmor],["amount",0]],a.itemDictionary.clothArmor=[["item",this.clothArmor],["amount",1]],a.itemDictionary.polarArmor=[["item",this.polarArmor],["amount",0]],this.potion=new this.Item,this.potion.name="Health Potion",this.potion.slug="potion",this.potion.desc="Heals "+this.potion.strength+" health",this.potion.buyable=!0,this.potion.price=100,this.potion.quantity=0,a.itemDictionary.potion=[["item",this.potion],["amount",0]],this.trueOffense=new this.Item,this.trueOffense.name="Offensive Sprit",this.trueOffense.slug="trueOffense",this.trueOffense.desc="Elder seal of approval",
this.trueOffense.message="Damage increased by 25%",this.trueOffense.damageMult=25,this.trueDefense=new this.Item,this.trueDefense.name="Defensive Sprit",this.trueDefense.slug="trueDefense",this.trueDefense.desc="Elder seal of approval",this.trueDefense.message="Armor increased by 25%",this.trueDefense.defenseMult=25,this.trueHealth=new this.Item,this.trueHealth.name="Kind Spirit",this.trueHealth.slug="trueHealth",this.trueHealth.desc="Elder seal of approval",this.trueHealth.message="Health increased by 25%",this.trueHealth.healthMult=25,this.winterCoat=new this.Item,this.winterCoat.name="Winter Sweater",this.winterCoat.slug="winterCoat",this.winterCoat.desc="Covered in cute deer and trees~",this.winterCoat.message="Keeps you warm and cozy so you can visit the snow wastes safely! +25 Health",this.winterCoat.health=25,this.winterCoat.buyable=!0,this.winterCoat.price=1e4,this.winterCoat.removeAfterBuy=!0,this.winterCoat.special=function(){a.progress.hasSweater=!0},this.pearl=new this.Item,this.pearl.name="Shiny Pearl",this.pearl.slug="pearl",this.pearl.desc="It is shiny",this.pearl.message="Holder gains +25 gold a second",this.pearl.money=25,this.piggyBank=new this.Item,this.piggyBank.name="Cat Bank",this.piggyBank.slug="piggyBank",this.piggyBank.desc="Like a Piggy Bank, but a Cat instead",this.piggyBank.message="Holder gains +15 gold a second",this.piggyBank.money=15,this.piggyBank.buyable=!0,this.piggyBank.removeAfterBuy=!0,this.piggyBank.price=2500,this.wizardsHair=new this.Item,this.wizardsHair.name="Wizards Hair",this.wizardsHair.slug="wizardsHair",this.wizardsHair.desc="Rumored to grant the holder great power.",this.wizardsHair.message="5% increased damage, 5% increased armor, 5% increased health",this.wizardsHair.damageMult=5,this.wizardsHair.defenseMult=5,this.wizardsHair.healthMult=5,this.wizardsHair.buyable=!0,this.wizardsHair.price=2e4,this.wizardsHair.removeAfterBuy=!0,this.deerAntlers=new this.Item,this.deerAntlers.name="Deer Antlers",this.deerAntlers.slug="deerAntlers",this.deerAntlers.desc="The latest in deer fashion",this.deerAntlers.message="Attacks deal +1 damage.",this.deerAntlers.lootOnce=!0,this.deerAntlers.damage=1,this.snowmanHat=new this.Item,this.snowmanHat.name="Snowmans Hat",this.snowmanHat.slug="snowmanHat",this.snowmanHat.desc="No one will ever wear it as good as the snowman...",this.snowmanHat.message="Attacks deal +5 damage",this.snowmanHat.lootOnce=!0,this.snowmanHat.damage=5,this.sleepingBag=new this.Item,this.sleepingBag.name="Deluxe Sleeping Bag",this.sleepingBag.slug="sleepingBag",this.sleepingBag.desc="Deluxe model is 23% cozier",this.sleepingBag.message="Allows you to sleep outside and rest anywhere",this.sleepingBag.buyable=!0,this.sleepingBag.price=2e3,this.sleepingBag.removeAfterBuy=!0,this.sleepingBag.special=function(){a.progress.hasSleepingBag=!0},this.gorillaFoot=new this.Item,this.gorillaFoot.name="Lucky Gorilla Foot",this.gorillaFoot.slug="gorillaFoot",this.gorillaFoot.desc="Luckiest of all animal feet",this.gorillaFoot.message="Holder gains +5 gold a second",this.gorillaFoot.lootOnce=!0,this.gorillaFoot.money=5,this.pocketSand=new this.Item,this.pocketSand.name="Pocket Sand",this.pocketSand.slug="pocketSand",this.pocketSand.desc="Wingo! Pocket sand!",this.pocketSand.message="1% chance to evade damage.",this.pocketSand.lootOnce=!0,this.pocketSand.evade=1,this.mantisClaw=new this.Item,this.mantisClaw.name="Mantis Claw",this.mantisClaw.slug="mantisClaw",this.mantisClaw.desc="Scythe like",this.mantisClaw.message="Attacks deal +5 damage",this.mantisClaw.lootOnce=!0,this.mantisClaw.damage=5,this.bigHeavyWood=new this.Item,this.bigHeavyWood.name="Log",this.bigHeavyWood.slug="bigHeavyWood",this.bigHeavyWood.desc="Its big, its heavy, its wood!",this.bigHeavyWood.message="+25 health",this.bigHeavyWood.lootOnce=!0,this.bigHeavyWood.health=25,this.pie=new this.Item,this.pie.name="Memories of pie",this.pie.slug="pie",this.pie.desc="Remembering the pie, it fills you with determination.",this.pie.message="+50 health",this.pie.health=50,this.unicornHorn=new this.Item,this.unicornHorn.name="Unicorn Horn",this.unicornHorn.slug="unicornHorn",this.unicornHorn.desc="",this.unicornHorn.message="",this.unicornHorn.health="",this.snowmenBlessing=new this.Item,this.snowmenBlessing.name="Snowmens Blessing",this.snowmenBlessing.slug="snowmenBlessing",this.snowmenBlessing.desc="RIP Gary & Friends",this.snowmenBlessing.message="Increases health by 50 and gives +10 gold a second.",this.snowmenBlessing.health=50,this.snowmenBlessing.money=10,this.abomItem=new this.Item,this.abomItem.name="Lucky Yeti Boots",this.abomItem.slug="abomItem",this.abomItem.desc="A little too big",this.abomItem.message="+50 health and wearer gains +20 gold a second.",this.abomItem.health=50,this.abomItem.money=20,this.mammothFur=new this.Item,this.mammothFur.name="Mammoth Fur Scarf",this.mammothFur.slug="mammothFur",this.mammothFur.desc="Kind of itchy..",this.mammothFur.message="Health increased by 5%",this.mammothFur.healthMult=5,this.frozenBanana=new this.Item,this.frozenBanana.name="Frozen Banana",this.frozenBanana.slug="frozenBanana",this.frozenBanana.desc="Maybe it will melt someday",this.frozenBanana.message="Damage increased by 4%",this.frozenBanana.damageMult=4,this.kingCrown=new this.Item,this.kingCrown.name="Crown of the King",this.kingCrown.slug="kingCrown",this.kingCrown.desc="Slightly bloody",this.kingCrown.message="+50 health and armor increased by 5%",this.kingCrown.health=50,this.kingCrown.defenseMult=5,this.vampireTeeth=new this.Item,this.vampireTeeth.name="Vampire Teeth",this.vampireTeeth.slug="vampireTeeth",this.vampireTeeth.desc="Made from plastic?",this.vampireTeeth.message="Attacks deal +5 damage",this.vampireTeeth.damage=5,this.sweetJacket=new this.Item,this.sweetJacket.name="Sweet Jacket",this.sweetJacket.slug="sweetJacket",this.sweetJacket.desc="Makes you look tough and has pockets for snacks!",this.sweetJacket.message="Damage increased by 10%, Armor increased by 10%, +100 coolness",this.sweetJacket.damageMult=10,this.sweetJacket.defenseMult=10,this.undeadItem=new this.Item,this.undeadItem.name="Soul Fragment",this.undeadItem.desc="A piece of The Lichs soul",this.undeadItem.slug="undeadItem",this.undeadItem.message="Damage increased by 5%, Armor increased by 5%, +100 health",this.undeadItem.damageMult=5,this.undeadItem.defenseMult=5,this.undeadItem.health=100,this.lichItem=new this.Item,this.lichItem.name="The Lichs Phylactery",this.lichItem.desc="You beat the game!",this.lichItem.slug="lichItem",this.lichItem.message="You beat the game!",a.itemDictionary.lichItem=[["item",this.lichItem],["amount",0]],a.itemDictionary.undeadItem=[["item",this.undeadItem],["amount",0]],a.itemDictionary.sweetJacket=[["item",this.sweetJacket],["amount",0]],a.itemDictionary.vampireTeeth=[["item",this.vampireTeeth],["amount",0]],a.itemDictionary.kingCrown=[["item",this.kingCrown],["amount",0]],a.itemDictionary.frozenBanana=[["item",this.frozenBanana],["amount",0]],a.itemDictionary.mammothFur=[["item",this.mammothFur],["amount",0]],a.itemDictionary.abomItem=[["item",this.abomItem],["amount",0]],a.itemDictionary.snowmenBlessing=[["item",this.snowmenBlessing],["amount",0]],a.itemDictionary.piggyBank=[["item",this.piggyBank],["amount",0]],a.itemDictionary.pie=[["item",this.pie],["amount",0]],a.itemDictionary.trueOffense=[["item",this.trueOffense],["amount",0]],a.itemDictionary.trueDefense=[["item",this.trueDefense],["amount",0]],a.itemDictionary.trueHealth=[["item",this.trueHealth],["amount",0]],a.itemDictionary.bigHeavyWood=[["item",this.bigHeavyWood],["amount",0]],a.itemDictionary.mantisClaw=[["item",this.mantisClaw],["amount",0]],a.itemDictionary.pocketSand=[["item",this.pocketSand],["amount",0]],a.itemDictionary.gorillaFoot=[["item",this.gorillaFoot],["amount",0]],a.itemDictionary.pearl=[["item",this.pearl],["amount",0]],a.itemDictionary.sleepingBag=[["item",this.sleepingBag],["amount",0]],a.itemDictionary.snowmanHat=[["item",this.snowmanHat],["amount",0]],a.itemDictionary.deerAntlers=[["item",this.deerAntlers],["amount",0]],a.itemDictionary.winterCoat=[["item",this.winterCoat],["amount",0]],a.itemDictionary.wizardsHair=[["item",this.wizardsHair],["amount",0]],this.compendium=new this.Item,this.compendium.name="Beast Compendium",this.compendium.desc="Basically a scrapbook",this.compendium.message="Keeps track of enemies you encounter.",this.compendium.slug="compendium",this.compendium.buyable=!0,this.compendium.price=500,this.compendium.removeAfterBuy=!0,a.itemDictionary.compendium=[["item",this.compendium],["amount",0]],a.otherItems=[a.itemDictionary.trueHealth,a.itemDictionary.trueOffense,a.itemDictionary.trueDefense,a.itemDictionary.bigHeavyWood,a.itemDictionary.pie,a.itemDictionary.winterCoat,a.itemDictionary.deerAntlers,a.itemDictionary.wizardsHair,a.itemDictionary.sleepingBag,a.itemDictionary.piggyBank,a.itemDictionary.gorillaFoot,a.itemDictionary.pocketSand,a.itemDictionary.vampireTeeth,a.itemDictionary.kingCrown,a.itemDictionary.pearl,a.itemDictionary.mantisClaw,a.itemDictionary.abomItem,a.itemDictionary.snowmanHat,a.itemDictionary.snowmenBlessing,a.itemDictionary.mammothFur,a.itemDictionary.frozenBanana,a.itemDictionary.sweetJacket,a.itemDictionary.undeadItem,a.itemDictionary.lichItem,a.itemDictionary.compendium],a.buyableItems=["potion","sword","woodArmor","decentSword","winterCoat","wizardsHair","compendium","piggyBank","sleepingBag"],a.weapons=[a.itemDictionary.fists,a.itemDictionary.sword,a.itemDictionary.bearClaws,a.itemDictionary.decentSword,a.itemDictionary.minotaurHammer,a.itemDictionary.claws,a.itemDictionary.giantCarrot],a.armor=[a.itemDictionary.clothArmor,a.itemDictionary.woodArmor,a.itemDictionary.healthArmor,a.itemDictionary.ghostArmor,a.itemDictionary.bugExoskeleton,a.itemDictionary.potionArmor,a.itemDictionary.polarArmor,a.itemDictionary.robotArmor],a.keys=["fists","sword","decentSword","bearClaws","minotaurHammer","claws","giantCarrot","robotArmor","potionArmor","ghostArmor","woodArmor","bugExoskeleton","boneArmor","healthArmor","polarArmor","clothArmor","potion","compendium","wizardsHair","winterCoat","deerAntlers","sleepingBag","snowmanHat","pearl","gorillaFoot","pocketSand","mantisClaw","bigHeavyWood","trueOffense","trueDefense","trueHealth","pie","piggyBank","snowmenBlessing","abomItem","mammothFur","frozenBanana","kingCrown","vampireTeeth","sweetJacket","undeadItem","lichItem"],a.findVal=function(){var e=["damage","health","evade","money","defense","defenseMult","damageMult","healthMult"];a.stats={damage:0,health:0,evade:0,money:0,defense:0,defenseMult:0,damageMult:0,healthMult:0},i(e,a.stats),a.statReset=!0},t(),a.findVal()}angular.module("app.inventory").service("inventoryService",e),e.$inject=["progressService"]}(),function(){"use strict";function e(e,t,i,a,n,o,s,r){function _(e,t){if(C.abilities[e].active)if(C.player.damage=C.player.calculateTotalDamage(),C.player.armorValue=C.player.calculateTotalArmor(),C.abilities[e].timer>0){C.abilities[e].timer=C.abilities[e].timer-1;var i=C.abilities[e].timer/C.abilities[e].max*100;angular.element(t).css("width",i+"%"),n(function(){_(e,t)},125)}else angular.element(t).css("width","0%"),C.abilities[e].timer=0,C.abilities[e].active=!1,c(e,t)}function l(){if(C.player.potionCD>0){C.player.potionCD=C.player.potionCD-1;var e=C.player.potionCD/300*100-1;angular.element(".potioncd .abilitybg").css("width",e+"%"),n(function(){l()},125)}else C.player.potionCD=0}function c(e,t){var i=C.abilities[e].cdMax;C.abilities[e].cd=i,angular.element(t).addClass("abilitycooldown"),h(e,t)}function h(e,t){if(C.abilities[e].cd>0){C.abilities[e].cd=C.abilities[e].cd-1;var i=C.abilities[e].cd/C.abilities[e].cdMax*100;angular.element(t).css("width",i+"%"),n(function(){h(e,t)},125)}else C.abilities[e].cd=0,angular.element(t).removeClass("abilitycooldown"),angular.element(t).css("width","0%")}function u(){C.abilities.resetAbilities(),C.player.potionCD=0}function m(){C.player.prev=!1,C.player.prevCheck=!1}function p(){C.player.specialEnd=C.currentLevel.specialEnd?C.currentLevel.specialEnd:void 0}function d(){if(o.emptyLog(),y(),"undefined"!=typeof C.currentLevel.spawnAtStart)for(var e=0;e<C.currentLevel.spawnAtStart.length;e++)e+1===C.currentLevel.spawnAtStart.length&&C.currentLevel.enemyArray.length>1?b(C.currentLevel.spawnAtStart[e],!0):b(C.currentLevel.spawnAtStart[e]);else C.enemySpawn=!0}function g(){for(var e=[],t=0;t<C.currentLevel.defaultAscii.length;t++)e[t]=C.currentLevel.defaultAscii[t];C.currentLevel.ascii=e,v()}function v(){var e=C.currentLevel.ascii[0].length,t=window.innerWidth,i=50;if(500>t?i=10:1e3>t&&(i=30),C.player.position[0]>i&&C.player.position[0]<e-i){var a=8*(C.player.position[0]-i),n=document.getElementById("levelwrap");n.style.left="-"+a+"px"}}function y(){var e=document.getElementById("levelwrap");e.style.left="auto"}function f(){var e=Math.round(100*Math.random());if(e>C.currentLevel.spawnChance&&L<C.currentLevel.enemyMax){L+=1;for(var e=Math.floor(100*Math.random()),t=0;t<C.currentLevel.unitSpawnChance.length;t++)if(e<C.currentLevel.unitSpawnChance[t]){var i=new C.currentLevel.enemyArray[t];if("undefined"!=typeof C.currentLevel.specialSpawn)if(C.player.position[0]<C.currentLevel.specialSpawn[0]){var a=Math.floor(100*Math.random());a<C.currentLevel.specialSpawnChance?w(i,"specialSpawn"):w(i,"enemySpawn")}else w(i,"enemySpawn");else w(i,"enemySpawn");return}}}function w(e,t){var i=[];i[0]=C.currentLevel[t][0],i[1]=C.currentLevel[t][1],e.position=i,C.unitArray.push(e)}function b(e,t){var i;i=t?new C.currentLevel.enemyArray[1]:new C.currentLevel.enemyArray[0];var a=[],n=C.currentLevel.ascii[e[1]][e[0]];"_"===n&&(i.prev=!0,i.prevCheck=!0),a[0]=e[0],a[1]=e[1],i.position=a,C.unitArray.push(i)}function k(e,t,i,a,n){n?(i[t[1]]=x(i[t[1]],t[0],"_"),i[e[1]]=x(i[e[1]],e[0],a)):(i[t[1]]=x(i[t[1]],t[0]," "),i[e[1]]=x(i[e[1]],e[0],a))}function x(e,t,i){return"undefined"!=typeof e?t>e.length-1?e:e.substr(0,t)+i+e.substr(t+1):void 0}function S(e){if("undefined"!=typeof e.colBox)for(var t=0;t<e.colBox[1];t++)for(var i=0;i<e.colBox[0];i++)x(),C.currentLevel.ascii[e.position[1]-t]=x(C.currentLevel.ascii[e.position[1]-t],e.position[0]+i," "),C.currentLevel.ascii[e.position[1]-t]=x(C.currentLevel.ascii[e.position[1]-t],e.position[0]-i," ")}function D(e){0===e.position[0]&&(e.alive=!1)}function T(){C.player.position=[0,24],C.currentLevel.ascii[24]=x(C.currentLevel.ascii[24],110," "),A(),y()}function A(){for(var e=[],t=0;3>t;t++)!function(e,t){var i=new C.currentLevel.enemyArray[0];t[e]=Math.floor(60*Math.random())+40;var a=[];a[0]=t[e],a[1]=24,i.position=a,C.unitArray.push(i)}(t,e)}function M(){var e=!1;if(C.messageLog=o.messageLog,C.player.attackSpeed=C.player.weapon.attackSpeed,C.player.damage=C.player.calculateTotalDamage(),C.player.armorValue=C.player.calculateTotalArmor(),C.player.active){if("theEnd"===C.currentLevel.slug&&"undefined"!=typeof C.currentEnemy&&C.currentEnemy.playerWarp&&(C.currentEnemy.playerWarp=!1,T()),!C.player.alive)return C.player.alive=!0,void o.updateMainMessage("You have been slain.",!0);for(var t=0;t<C.unitArray.length;t++){if(C.unitArray[t].collisionCheck(C.currentLevel.ascii,C.unitArray),t>0&&D(C.unitArray[t]),!C.unitArray[t].alive){"Lich"===C.unitArray[t].slug&&(C.player.lichKilled=!0),S(C.unitArray[t]);var a="";a=C.unitArray[t].foundLoot?C.unitArray[t].deathMessage+" "+C.unitArray[t].lootMessage:C.unitArray[t].deathMessage,o.addMessage(a),L-=1;for(var r=[],_=0;_<C.unitArray.length;_++)_!==t?r.push(C.unitArray[_]):(k(C.unitArray[t].position,C.unitArray[t].positionOld,C.currentLevel.ascii," ",C.unitArray[t].prevCheck),e=!0);C.unitArray=r}"undefined"!=typeof C.unitArray[t]&&k(C.unitArray[t].position,C.unitArray[t].positionOld,C.currentLevel.ascii,C.unitArray[t].symbol,C.unitArray[t].prevCheck),C.currentEnemy=i.currentEnemy}C.enemySpawn&&f(),v(),n(M,125)}else C.player.levelComplete&&C.player.alive&&C.currentLevel.unlock&&(s.progress.levels[C.currentLevel.unlock]=!0)}function I(){M()}var C=this;C.title="LevelController",C.currentLevel=e.treeOne,C.currentLevel.checkLength(),C.player=t.player,C.enemySpawn=!1,C.mainMessage=o.mainMessage,C.abilities=C.player.abilities,C.itemDictionary=r.itemDictionary,C.activateAbility=function(e){var t="";if(C.abilities[e].active||0!==C.abilities[e].cd)C.abilities[e].cd>0?(t=C.abilities[e].name+" is on cooldown!",o.updateMainMessage(t,!0)):(t=C.abilities[e].name+" already active!",o.updateMainMessage(t,!0));else{C.abilities[e].special(),t=C.abilities[e].name+" has been used.",o.updateMainMessage(t);var i="#"+C.abilities[e].slug,a=i+" .abilitybg";angular.element(a).css("width","100%"),_(e,a)}},C.initPotion=function(){var e=C.player.usePotion();e&&l()},C.resetLevel=function(){i.currentEnemy=void 0,C.currentLevel=e.currentLevel,m(),u(),p(),C.unitArray=[t.player],C.player.active=!0,g(),d();var a=[];a[0]=C.currentLevel.playerSpawn[0],a[1]=C.currentLevel.playerSpawn[1],C.player.position=a},C.resetLevel();var L=0;I()}angular.module("app.level").controller("LevelController",e),e.$inject=["levelService","playerService","enemyService","$scope","$timeout","messageService","progressService","inventoryService"]}(),function(){"use strict";function e(e){this.mainMessage="",this.Level=function(){this.checkLength=function(){console.log(this.defaultAscii[0].length)},this.spawnMore=!0,this.prev="mainMap",this.prevName="Map",this.spawnChance=90},this.treeOne=new this.Level,this.treeOne.unlock="treeTwo",this.treeOne.spawnMore=!1,this.treeOne.enemySpawn=[141,21],this.treeOne.playerSpawn=[0,22],this.treeOne.enemyArray=[e.Tree],this.treeOne.name="The Forest",this.treeOne.slug="treeOne",this.treeOne.defaultAscii=["     .'           './   \\    .'\\      /                            /                                     \\/                               /                     ","    /               \\    \\ .'   \\    /                            /                                      /                              .'                       ","  .'                      /      '../               //\\\\        .'                                     .'                              /                           "," /                 .     /         /               ///\\\\\\    . /                                      /                              .'                           ","/      ^           T    /                        /////\\\\\\\\   T       ^                .                              .                                          .","   ^   T    .    ^               .       ^      //////\\\\\\\\\\      .   T                T              ^               T       ^                                  T","   T  .     T    T     ^     .   T       T  //////////\\\\\\\\\\\\\\\\\\  T            ^                      T                       T            .              .  ","     / \\      .       / \\   / \\     / \\       /// -- /\\ -- \\\\\\         .      T          .                                                T              T   ",".     |      / \\       |     |       |    ////////////\\\\\\\\\\\\\\\\\\\\\\     / \\           .    T          .            .              .                 ^                  "," \\     .      |             ^     .       ////////////\\\\\\\\\\\\\\\\\\\\\\\\   . |    ^      / \\      .      / \\          / \\     ^      / \\      .         T             .    "," \\    / \\   .     ^        / \\   / \\        //////////\\\\\\\\\\\\\\\\\\\\    / \\    / \\     / \\     / \\     / \\  ^        |.    / \\      |      / \\     .          .    / \\   ","| .   / \\  / \\   / \\      . |    / \\      //////////    \\\\\\\\\\\\\\\\     |      |       |   .  / \\      |  / \\  .    / \\   / \\        ^    / \\    / \\        / \\    |    "," / \\   |    |    / \\     / \\      |     //////// |        | \\\\\\\\\\\\\\\\ .      .          / \\  |    ^      |  / \\   / \\    |     ^  / \\    |     / \\        / \\         "," / \\   .          |     /   \\                   ,|   __   |.        / \\    / \\         / \\      / \\        / \\    |          / \\ / \\      .    |      ^   |    ^     ","  |   / \\         .     /   \\      .        __.'_|  /__\\. | \\__     / \\    / \\      .   |       / \\    ^    |        ^       / \\  |      / \\   .     / \\      / \\    ","^     / \\        / \\      |       / \\     ,'__.'.  \\ \\ / \\|__  \\,.   |    . |      / \\           |    / \\           / \\       |      .   / \\  / \\    / \\      / \\    "," \\     |    /\\   / \\   .          / \\    .     / \\ / / / \\   \\___ \\      / \\       / \\      ^         / \\        .  / \\    .        / \\   |   / \\  .  |        |     "," \\    ^    /  \\   |   / \\          |    / \\    / \\ \\/   |     ^  /       / \\        |      / \\         |        / \\  |    / \\       / \\        |  / \\        .       ","|    / \\   /  \\  .    / \\      ^        / \\     |            / \\      .   |  .^.           / \\       .          / \\       / \\        |       ^   /   \\   ^  / \\  .   ","     / \\    ||  / \\    |      / \\        |           .       / \\     / \\    /   \\           |       / \\          |         |                / \\  /   \\  / \\ / \\ / \\  ","      |         / \\          /   \\                  / \\       |     /   \\   /   \\                   / \\                                     / \\    |    / \\  |  / \\  ","                / \\          /   \\                  / \\             /   \\     |                      |                    ''''''''''''''     |           |       |   ","                 |             |                     |                |           ''''''''''''''''''''''''''''''''''''''''              ''''''''''                   ","''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''                                                                '''''''''''''''''''"],this.treeOne.spawnAtStart=[[17,22],[31,22],[53,22],[70,22],[101,21],[141,21]],this.treeTwo=new this.Level,this.treeTwo.slug="treeTwo",this.treeTwo.unlock="treeCity",this.treeTwo.specialEnd=95,this.treeTwo.enemyArray=[e.Deer,e.Bear],this.treeTwo.spawnMore=!1,this.treeTwo.spawnAtStart=[[20,22],[45,22],[70,22],[85,22]],this.treeTwo.playerSpawn=[0,22],this.treeTwo.name="Approach the Giant Tree",this.treeTwo.defaultAscii=["       /         \\   .^.               .'                               //////////////////////\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\  ","     .'           './   \\    .'\\      /                            ///////////////////////////\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\","    /               \\    \\ .'   \\    /                            /////////////////////////     \\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\","  .'                      /      '../                       /////////////////////////////          \\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\"," /                 .     /         /                    ///////////////////////////////              \\\\\\\\\\\\\\\\\\\\\\\\\\\\","/                  T    /                                                        |            |           |        ","   ^        .    ^               .                                               |            |           |        ","   T  .     T    T           .   T                   .                        ^  |                        |        ","     / \\      .             / \\            .        / \\     .          .      T .'   |             |      '.       ",".     |      / \\      .      |         .  / \\       / \\    / \\        / \\       |    |             |       |       "," \\     .      |      / \\    ^     .   / \\  |         |     / \\       . |    ^   |                          |       "," \\    / \\         ^  / \\  ./ \\   / \\  / \\        .          |       / \\    / \\  |           |              |       ","| .   / \\     ^  / \\  |  / \\|    / \\   |   .    / \\                  |      |   |                          |       "," / \\   |  .  / \\ / \\   . / \\   .  |   .   / \\   / \\     ^            .      .  .'                          '.      "," / \\   .  / \\/ \\  |   / \\ |   / \\    / \\  / \\    |     / \\          / \\    / \\ |        |               |   |      ","  |   / \\ / \\ |   .   / \\  .  / \\  . / \\   |           / \\          / \\    / \\ |        |               |   |      ","^     / \\  |     / \\   |  / \\  |  / \\ |          ^      |            |      ,..|                 |      |   |      "," \\     |    /\\   / \\   .  / \\  .  / \\    .      / \\          ^         ___.'   |                 |          |      "," \\         /  \\   |   / \\  |  / \\  |    / \\    /   \\        / \\ _____.'       .'   |      ________          '.     ","|          /  \\       / \\     / \\       / \\    /   \\        / \\ '.____.,'--__.|    |     /        \\          |'.   ","            ||         |       |         |       |           |                |          |        |          |  \\  ","                                                                                           _______/           |   '","__________________________________________________________________________________________-                        ","-------------------------------------------------------------------------------------------------------------------"],this.bridge=new this.Level,this.bridge.enemyArray=[e.Penguin,e.Yeti],this.bridge.playerSpawn=[0,14],this.bridge.enemySpawn=[200,13],this.bridge.unitSpawnChance=[50],this.bridge.specialSpawn=[140,14],this.bridge.specialSpawnChance=[100],this.bridge.spawnMore=!1,this.bridge.spawnAtStart=[[131,14],[135,14],[140,14],[144,14],[153,14],[200,13]],this.bridge.slug="bridge",this.bridge.enemyMax=5,this.bridge.unlock="snow",this.bridge.name="The Bridge",this.bridge.defaultAscii=["  / \\    / \\                          .           /                                                             _'                                                                         .........                            ","  / \\     |         .                / \\         /                                               ~~~           / \\_                                                                    ..''         ''..                        ","   |               / \\       .       / \\        /                     ~~                                      /    \\  /                      |-                                                                                 ","           .       / \\      / \\       |        /      ~~~                                                   .'     /\\/                      -|                                                                                  ","          / \\       |       / \\               /                                                           .'      /  \\                       |                    -|                                              -|            ","          / \\                |    ^          /                                    ~~~                    /        \\  /                                             |-                                              |-           ","    .      |                     / \\       .'                                                           /         /\\                                               |                                               |            ","   / \\                 .         / \\      /                                                           .'         /  \\/                 ,......                                            -|                                    ","   / \\                / \\         |      /                                                           /              /              .'''       ''...                                        |-                                   ","    |         ^       / \\               /                                                           /                                                                                      |                                    ","             / \\       |  .           .'                      ~~~                                 .'                                          |-                                                                                ","   /\\        / \\         / \\         /                                                           /                                           -|                                                                                ","  /  \\        |         /   \\       /                                                           /                                             |                                                                               ","  /  \\                  /   \\      /                                               ~~~         /                                                                                                                                ","   ||                     |       /                                                          _/                                                            __________----''''''''''''''''''''''''''''''''''''''''''''''''''----____  ","                                .'          ~~~~                                           .'                           '''''''''''''''''''''''''''''''''''''''''''''                                                          '''''","'''''''____                   __________________________________________________________________           '''''''''''''                                                                                                                              ","       ''''''''''''''''''''''/   /   /   /   /   /   /   /   /   /   /   /   /   /   /   /   / /'''''''''''                                         |-                                                                          ","  .                         /-----------------------------------------------------------------/                                -|                  -|                           -|                                              "," / \\        .             .'         //\\\\                // \\\\                 //\\\\          /                                  |-                  |                            |-                              |-             "," / \\       / \\          .'                                                                 .'                                   |                                                |                              -|              ","  |        / \\         /                       ~~                                         /            |-                                                                                                        |              ","            |         /                                          ~~~~                   .'             |                                                                                                                        "],this.snow=new this.Level,this.snow.enemyArray=[e.Snowman,e.SnowmanBoss],this.snow.playerSpawn=[0,10],this.snow.spawnMore=!1,this.snow.spawnAtStart=[[14,11],[47,9],[124,14]],this.snow.name="Snow Wastes",this.snow.slug="snow",this.snow.unlock="wizard",this.snow.specialEnd=190,this.snow.defaultAscii=["                                                                                                                                                           \\                                       ","                                                                                                                                                            \\  /____                               ","                                                                                                                          _     _____                        \\/     \\____    ______                ","                                                                                                                         ***   |     |                                   \\  /      \\_____          ","                                                                                                                          |   _|_____|_                                   \\/             \\     ____","                                                                                                                          |    ( . . )                                                    \\  /     ","                                                                                                                          >    _\\_-_/_                                                     \\/      ","                                                 o                                                                        |\\  /   +   \\                                                               ","                                               -( )-                                                                      | \\_|   +   |--.                                                               ","                o                              (   )                                                                         _\\_______/_  \\                                                                ","              -( )-                    ____-----------------------------___                                                 /           \\  ^                                                              ","              (   )      __________--------                            -------____                                         /             \\                                                       /\\ ","-----------------------------------                                           --------______                               |             |                               /\\         /\\       ___/  \\","                                                                                      -----------___                       \\             /                   /\\     ____/  \\_______/  \\_____/       ","                                                                                                 ------______               \\           /      ____---------/  \\___/                                ","                                                                                                       --------------------------------------------                                                ","                                                                                                                                                                                                   ","                                                                                                                                                                                                   ","                                                                                                                                                                                                   ","                                                                                                                                                                                                   "],
this.snowNorth=new this.Level,this.snowNorth.enemyArray=[e.GorillaSnow,e.Mammoth],this.snowNorth.unitSpawnChance=[60,80],this.snowNorth.enemySpawn=[240,15],this.snowNorth.enemyMax=5,this.snowNorth.playerSpawn=[0,15],this.snowNorth.name="Northern Wastes",this.snowNorth.slug="snowNorth",this.snowNorth.specialEnd=265,this.snowNorth.unlock="cabin",this.snowNorth.defaultAscii=["                                                                                                                                                                                                                                                                                                             ","                                                                                              _|                                                                                                                                                                                                             ","                                                                                               |_                                                                                                                           _|                                                                               ","    _|                                               .'''''''''''''.                           |                                                      .'''''''''''''''''.                                                    |_                                                                              ","     |_                                                                                                                                                                                                                      |                                                                 .             ","     |                                                                                                                                                              _|                                                                                                                        / \\            ","                                                                                            .''''''''''.                                                             |_                                                                                                             .        / ~ \\           ","                   .'''''''''''''.                    _|_                                                                                                            |                                                                                                        .    / \\       /___\\           ","                                                       |_                                                                                                                                                                                                                    / \\   / \\     ~   |         *   ","                                                       |                                                                                                                                                                                                                     / \\    |        ~          / \\  ","                                                                                                                                                                                                                                                                          .   |            __          /   \\ ","                                                                                                                                                                                                                                                                         / \\        _______||_      .  /   \\ ","                                                                                                                                                                                                                                                                         / \\       /   \\      \\    / \\   |   ","                                                                                                                                                                                                                                                                          |       /_____\\______\\  /   \\      ","                                                                                                                 ____________________________________________________________                                                                                                     |  _   |     |  /___\\      ","__________________________                                                        _______________________________''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''_____________________________________________________________________________________________________| | |  |     |____|________","''''''''''''''''''''''''''________________________________________________________'''''''''''''''''''''''''''''''                                                            ''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''","                          ''''''''''''''''''''''''''''''''''''''''''''''''''''''''                                                                                                                                                                                                                           "],this.sea=new this.Level,this.sea.enemyArray=[e.Oyster,e.Crab],this.sea.playerSpawn=[0,14],this.sea.spawnMore=!1,this.sea.spawnAtStart=[[54,13],[76,13],[110,14],[131,14],[153,13]],this.sea.name="Going for a Swim",this.sea.slug="sea",this.sea.defaultAscii=["                                                                                                                                                                                                                                 ","~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~","                                                                                                                                                                                                                                 ","                                                                                                                                                                                                                                 ","                                            `                                                                                            `                        `                                                              ","                                                                                                     `                                                                                                                           ","                                                                        `                                                                                                                                                        ","                                                                                                                                     `                                                                                           ","                                                                                                                                            `                                                                                    ","           `                                                                                                                                                         `                                                           ","                                                                                                                                                                                                                                 ","                                                                                                                                                       V          V                                                               ","                                                                                                                                                        \\_.''''._/                                                               ","                                                                                                                                                         ;',--,';                                                                ","                                             ,'''''''''''''''''''''''''''''''''''''''''''''.                                                  .''''''''''''''''''''''''''''''''''''''''''.                                       ","'''''''''''''''''''''''''''''''''''''''''''''                                               ''''''''''''''''''''''''''''''''''''''''''''''''''                                            '''''''''''''''''''''''''''''''''''''''","                                                                                                                                                                                                                                 "],this.ruins=new this.Level,this.ruins.slug="desert",this.ruins.unlock="dungeon",this.ruins.enemyArray=[e.Gorilla,e.DustDevil],this.ruins.specialSpawn=[120,12],this.ruins.specialSpawnChance=50,this.ruins.unitSpawnChance=[40,80],this.ruins.enemyMax=4,this.ruins.playerSpawn=[0,13],this.ruins.enemySpawn=[250,10],this.ruins.name="The Desert",this.ruins.specialEnd=250,this.ruins.defaultAscii=["                                                                                                                                                                                     /                                                                                   ","                                                                                                                                                                                    /                                        ________________                            ","                                                                                                                                                                                   /                                                                                     ","                                                                                                                                                                                  /         __________________________                                                   ","                                                                                                                                                                                 /                                                                                       ","                                                                                                                                                                                /                                                                                        ","                                                                                                                                                                               /                        ____________________________                [=]=v=[=]            ","                                                                                                                                                                              /                                                                     __.\\ /.__            ","                                                                                                          ____________________________.''''''''''''._________________________/                                                                      |        |           ","                                ________.'''''''''._______________                      ________________.'                                                                  /                                                                       |        |           ","______.'''''''''._____________.'                                  '.__________________.'            +                           +                        +                 /                                                                        |        |           ","                                                       +                                            +                                                    +                                                                                                   |           ","                         +                             +                                                                                                      .'''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''           ","                         +                                                                                         .''''''''''''''''''''''''''''''''''''''''''                                                                                                           ","                                               .'''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''                                                                                                                                                      ","'''''''''''''''''''''''''''''''''''''''''''''''                                                                                                                                                                                                                          "],this.dungeon=new this.Level,this.dungeon.spawnMore=!1,this.dungeon.enemyArray=[e.Ghost,e.Minotaur],this.dungeon.playerSpawn=[0,0],this.dungeon.spawnAtStart=[[100,11],[180,11],[198,11]],this.dungeon.slug="dungeon",this.dungeon.unlock="ruinsCleared",this.dungeon.name="The Beasts Lair",this.dungeon.defaultAscii=["                                             *                                                                                                                                                                                    ","____                                         *                        *   *                                                                                                                                                       ","''''____                                   __*__                      *   *                                                                                                                                                       ","    ''''____                              |||||||                     *   *                                                                                                                     .'\\                               ","        ''''____                          |||||||                      \\o/                                                                                                                    .'   \\  |\\...|\\                     ","            ''''____                      |||||||                       |                                    _______                    *-------------------*                                 \\    .' |o  o  |                    ","                ''''____                  *******                      / \\                                  .|'|'|'|.                       |   |   |  |                                       \\.'\\\\  ;|../;;;_                   ","                    ''''____                                                                                || | | ||                      c|  <|   V =|=                                          o\\/ ;;  ;; /\\                  ","                        ''''____                                               ....0..0....                 || | | ||                                                                               \\'| ;  ;  | \\                 ","                            ''''____                                           |\\   >--\\-o \\                |v v v v|                                                                                 '._____.'  O                ","                                ''''____                                         |--0---0---|                                                                                                          | |  | |                   ","                                    ''''____                                                                                                                                                          ,' /  \\ ',                  ","                                        ''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''","                                                                                                                                                                                                                                  ","                                                                                                                                                                                                                                  ","                                                                                                                                                                                                                                  ","                                                                                                                                                                                                                                  ","                                                                                                                                                                                                                                  "],this.shroom=new this.Level,this.shroom.enemyArray=[e.Vampire,e.King],this.shroom.spawnMore=!1,this.shroom.playerSpawn=[0,14],this.shroom.spawnAtStart=[[140,8],[145,8],[150,8],[160,8],[165,8]],this.shroom.enemyMax=10,this.shroom.name="? ? ?",this.shroom.slug="shroom",this.shroom.unlock="shroomFinish",this.shroom.defaultAscii=["                                                                                                                                            /\\                   _________                                                                     ","                                                                                                                                           /  \\                 |'._______'.                                                                   ","            ____                                                                                                           /\\              |  |_/\\______________| |   __   |                                                                   ","           /  o \\                                                                                                          ||______________|  '/  \\               |  |  |  |                                                                   ","           |o  o|               _________                   _______                               ________                 | '.  /\\            |  |_______________|  |__|  |                                                                   ",'           ""||""              /_________\\                 /_______\\                ________     /________\\ ,_____________ |   \'.||____________|  |   | |     | |          |                                                                   ',"_____________||____________        //                          \\\\     ______       /________\\   _____\\\\__.''               |     |                    'V'     'V'          |                                                                   ","  _______    ||            '--.____\\\\__________________________//____/o  o  \\__________//_____.'     //                    |     |                                          \\                                                                  "," /_______\\            _________     \\\\     ________           //     | o   o|          \\\\            \\\\                   /       ________________________________________                                                                   ","    //               /_________\\          /________\\                 '''||'''           \\\\                               /     /'''''''''''''''''''''''''''''''''''''''''''\\                                                                    ","    \\\\                    \\\\                  \\\\                        ||                          ____________________/     /        /o  o\\                              '''''''''''''''''''''''\\                                            ","      _____________       //                   \\\\            ____       ||                         /                         /         |  o |                                                      \\__________________________                 ",'     /             \\     //                    //           /o  o\\                                /     ____________________/          ""||""      _________                                                                  \\________________',"____/    ______     \\______________________                 | o  |         ______________________/     /    ______                       ||       /_________\\                                                                                  ",'        /      \\                           \\                 "||"         /                           /    /o   o \\             _____    ||           //                                                                                       ',"_______/        \\_______________________    \\                 ||         /     ______________________/     |  o  o|            /_____\\                \\\\                                                                                       ",'     ____________                       \\    \\__________________________/     /      ______________        """||"""              //                    \\\\                                                                                      ',"    /            \\                       \\                                   /      /              \\          ||                //                                                                                                             ","   /______________\\                       \\_________________________________/      /________________\\         ||                \\\\                                                                                                             ","         \\   \\                                                                           /  /                                                                                                                                                  "],this.arena=new this.Level,this.arena.enemyArray=[e.Mantis,e.StickBug],this.arena.unitSpawnChance=[48,95],this.arena.playerSpawn=[2,18],this.arena.enemySpawn=[87,18],this.arena.specialEnd=87,this.arena.enemyMax=20,this.arena.name="Fight Night",this.arena.slug="arena",this.arena.unlock="bridge",this.arena.defaultAscii=["^ ^ ^ ^ ^ ^ ^ ^ ^ ^ ^ ^ ^ ^ ^ ^ ^ ^ ^ ^ ^ ^ ^ ^ ^ ^ ^ ^ ^ ^ ^ ^ ^ ^ ^ ^ ^ ^ ^ ^ ^ ^ ^ ^ ^ ^ ^ ^","|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|","|_|_|_|_|_|_|_|_|_|_|_|_|_|_|_|_|_|_|_|_|_|_|_|_|_|_|_|_|_|_|_|_|_|_|_|_|_|_|_|_|_|_|_|_|_|_|_|","                  ..........................................................                   ","          ....''''     o o    \\o/  o   o   o   o   o  o    o   o   o  \\o/   ''''....           ","       .''             ' '     '   '   '   '   '   '  '    '   '   '   '            ''.        ","    .''   o \\o/   o   \\o/ \\o/  \\o/  o \\o/   o   \\o/  \\o/  o    oo     o   o  \\o/  \\o/  ''.     ","  .'      '  '    '    '   '    '   '  '    '    '    '   '    ''     '   '   '    '      '.   "," /   \\o/  o   o   o    o   o   o \\o/o/ \\o/ o \\o \\o/     o   \\o/ o   \\o/ o  o    \\o/  o   o  \\  ","/____________________________________________________________________________________________\\ ","                                                                                              ","                                                                                              ","                                                                                              ","                                                                                              ","                                                                                              ","                                                                                              ","_                                                                                         __  "," |                                                                                       |  | "," |                                                                                       |  | ","''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''' "],this.robot=new this.Level,this.robot.enemyArray=[e.Robot],this.robot.playerSpawn=[0,15],this.robot.spawnAtStart=[[108,15]],this.robot.spawnMore=!1,this.robot.name="The Wizards Task",this.robot.slug="robot",this.robot.unlock="lich",this.robot.defaultAscii=["           /                                                                                       \\    /                                                     ","          /                                                                                         \\  /                                                      ","        .'                                                                                           '/                                                       ","       /                                                                                                                                                      ","      /                                                                                                                                                       ","    .'                                                                                                                                                        ","   /                                                                                                                                                          ","  /                                                                                                                                                           ",".'                                                                                                             .                                              ","                                                                                                            ___|____                                          ","                                                                                                           |        |                                         ","                                                                                                        o  | 0  0   |                                         ","                                                                                                         \\.|  __    |.                                        ","                                                                                                            \\______/  \\                                       ","                                                                                                             |    |    o                                      ","                                                                                                            c|   c|                                           ","'''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''"],this.theEnd=new this.Level,this.theEnd.enemyArray=[e.Undead,e.Lich],this.theEnd.playerSpawn=[0,24],this.theEnd.spawnAtStart=[[111,24]],this.theEnd.spawnMore=!1,this.theEnd.enemyMax=20,this.theEnd.name="The End",this.theEnd.slug="theEnd",this.theEnd.defaultAscii=["                                                                                                  /     \\              _                                 ","                                                                                                \\\\  /\\   /           _/_\\\\                            ","                                                                                               \\\\  | ||  //         //    \\\\                          ","                                                                                               \\ \\ | ||   //       | |* *  |\\                         ","                                                                                              \\ \\  | ||  / /       |  vvvv | |                //       ","                                                                                               \\ \\ | ||  / /        \\ wwww/ _/              ////      ","                                                                                               \\ \\ | ||  / /         \\__|/_/___           \\/  /       ","                                                                                               \\ \\ | || / /         / \\_//     |\\        /| -'        ","                                                                                                \\ \\| || //         /|  '/      | \\      / |           ","                                                                                              .-._\\| ||/.-.       / |          |  \\    /  |           ","                                                                                              '..--___--..'______/  |          |   \\  /   |           ","                                                                                                  /   \\|            |          ||   \\/    |           ","                                                                                                  \\___/            ||          |||        |           ","                                                                                                   / \\|        |  |||__________| | |      |           ","                                                                                                   \\ /|    ||| |/|| |          |  ||   ||/            ","                                                                                                    '  \\ |\\| |\\|    |          |   \\/|\\|          ","                                                                                                        \\|         ||          ||                     ","                                                                                                                   |            |                     ","                                                                                                                   |            |                     ","                                                                                                                   |            |                     ","                                                                                                                   |            |                     ","                                                                                                                  |              |                    ","                                                                                                                  | |      |   | |  |                 ","                                                                                                               | || | | |  | | | | ||                 ","                                                                                                               |||||||||||||||||||||||                ","''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''"],
this.levelDictionary=[],this.levelDictionary.treeOne=this.treeOne,this.levelDictionary.treeTwo=this.treeTwo,this.levelDictionary.bridge=this.bridge,this.levelDictionary.sea=this.sea,this.levelDictionary.snow=this.snow,this.levelDictionary.snowNorth=this.snowNorth,this.levelDictionary.ruins=this.ruins,this.levelDictionary.dungeon=this.dungeon,this.levelDictionary.shroom=this.shroom,this.levelDictionary.arena=this.arena,this.levelDictionary.robot=this.robot,this.levelDictionary.theEnd=this.theEnd,this.switchCurrentLevel=function(e){this.currentLevel=this.levelDictionary[e]}}angular.module("app.level").service("levelService",e),e.$inject=["enemyService"]}(),function(){"use strict";function e(e,t,i,a,n,o,s,r,_,l,c,h,u,m){function p(){r.initShop(),A.itemDictionary=r.grabItemDictionary(),A.itemList=[r.shopList]}function d(){var e=angular.element("#locationwrap").children();e.remove(),g()}function g(){A.currentLocation.formatted||A.currentLocation.initClicks();for(var e=0;e<A.currentLocation.ascii.length;e++)A.currentLocation.formatted||(A.currentLocation.ascii[e]="<pre>"+A.currentLocation.ascii[e]+"</pre>"),A.currentLocation.ascii[e]=o(A.currentLocation.ascii[e])(t);A.currentLocation.formatted=!0,v(),y()}function v(){for(var e=0;e<A.currentLocation.ascii.length;e++)angular.element("#locationwrap").append(A.currentLocation.ascii[e]);n(y,10)}function y(){var e=angular.element("#locationwrap").children().length;e!==A.currentLocation.ascii.length&&v()}function f(){if("wizard"===A.currentLocation.slug){var e=A.currentLocation.asciiCheck();e!==A.currentLocation.currentAscii&&(A.currentLocation.currentAscii=e,A.currentLocation.ascii=A.currentLocation[e],A.currentLocation.formatted=!1,d(),g())}}function w(){A.money=h.moneyTick(),A.resources=h.resources}function b(){A.player.damage=A.player.calculateTotalDamage(),A.player.armorValue=A.player.calculateTotalArmor(),A.player.maxHealth=A.player.calculateTotalHealth()}function k(){A.player.lichKilled&&(A.player.lichKilled=!1,A.switchLocation("ending"))}function x(){A.count%30===0&&m.saveGame()}function S(){A.count=A.count+1,A.player.healthRegen(),w(),b(),k(),x(),n(S,1e3)}function D(){A.player.healthBarUpdate(),A.activeTemplate=l.activeTemplate,A.messageError=_.messageError,A.mainMessage=_.mainMessage,f(),n(D,125)}function T(){g(),S(),D()}var A=this;A.count=0,A.player=i.player,A.progress=u.progress,A.currentLocation=a.currentLocation,p(),A.locationDictionary=a.locationDictionary,A.levelDictionary=s.levelDictionary,A.currentLocation.specFunc(),A.reset="",A.switchLocation=function(e){var t=a.switchLocation(e);t&&(A.currentLocation=a.switchLocation(e),d(),"treeShop"===e&&p())},A.switchLevel=function(e){var t=a.switchLevel(e);t&&(A.currentLocation=a.switchLevel(e))},A.switchTemplate=function(e){a.switchTemplate(e)},A.buyItem=function(e){r.initPurchase(e),A.money=h.resources.money,n(function(){A.itemList=[r.shopList]},50)},A.calculateTotlMoneyRate=function(){return h.calculateTotlMoneyRate()},A.resetGame=function(){A.reset=A.reset.toUpperCase(),"RESET"===A.reset?m.resetGame():_.updateMainMessage('You must send "RESET" to delete your save!',!0)},T()}angular.module("app.main").controller("MainController",e),e.$inject=["$rootScope","$scope","playerService","mainService","$timeout","$compile","levelService","shopService","messageService","templateService","dialogueService","resourcesService","progressService","savingService"]}(),function(){"use strict";function e(e){e.configureStates(t())}function t(){return[{state:"main",config:{url:"/",templateUrl:"app/main/main.html",controller:"MainController",controllerAs:"vm",title:"main"}}]}angular.module("app.main").run(e),e.$inject=["routerHelper"]}(),function(){"use strict";function e(e,t,i,a,n,o){function s(){var e;return e=r.progress.hasMap?r.mainMap:r.house}var r=this;r.levelDictionary=t.levelDictionary,r.progress=i.progress,r.player=o.player,r.switchTemplate=function(e){r.player.active=!1,a.switchTemplate(e)},r.switchLevel=function(e){var i=r.levelDictionary[e];return r.progress.levels[i.slug]?(r.switchTemplate("app/level/level.html"),t.switchCurrentLevel(e),n.updateMainMessage(""),r.currentLocation=r.levelDictionary[e],r.levelDictionary[e]):void n.updateMainMessage("You cannot visit here yet.",!0)},r.switchLocation=function(e){var t=r.locationDictionary[e],i=!1;if("undefined"==typeof t.slug&&(i=!0),r.progress.levels[t.slug]||i){r.switchTemplate("app/main/main.html");var a=r.locationDictionary[e];return n.mainMessage="",r.currentLocation=a,a}return n.updateMainMessage("You cannot visit here yet.",!0),!1},r.setCharAt=function(e,t,i){return t>e.length-1?e:e.substr(0,t)+i+e.substr(t+1)},r.click=function(e,t,i,a,n,o,s,_){for(var l=0;s>l;l++){var c,h,u,m="",p='<p class = "tooltip">'+t+"</p>";_?(c=r.levelDictionary[i],h=r.progress.levels[c.slug],"undefined"!=typeof h&&(u="ng-if = \"vm.progress.levels['"+c.slug+"'];\"",p='<p class = "tooltip" '+u+">"+t+"</p>"),m='<span class = "click" ng-click = "vm.switchLevel(\''+i+"')\">"+p+e.ascii[n+l][a]):(c=r.locationDictionary[i],h=r.progress.levels[c.slug],"undefined"!=typeof h&&(u="ng-if = \"vm.progress.levels['"+c.slug+"'];\"",p='<p class = "tooltip" '+u+">"+t+"</p>"),m='<span class = "click" ng-click = "vm.switchLocation(\''+i+"')\">"+p+e.ascii[n+l][a]);var d=e.ascii[n+l][a+o]+"</span>";e.ascii[n+l]=this.setCharAt(e.ascii[n+l],a+o,d),e.ascii[n+l]=this.setCharAt(e.ascii[n+l],a,m)}},r.Location=function(){this.asciiFormatted=[],this.asciiSpanned=[],this.formatted=!1,this.initClicks=function(){},this.specFunc=function(){}},r.locationDictionary=[],r.mainMap=new r.Location,r.mainMap.name="Map",r.mainMap.initClicks=function(){r.click(this,"A Cabin","cabin",160,5,30,9),r.click(this,"Northern Wastes","snowNorth",150,15,50,15,!0),r.click(this,"Northern Wastes","snowNorth",130,15,19,10,!0),r.click(this,"Go For a Swim?","sea",100,20,25,10,!0),r.click(this,"Meteorite","lich",104,1,3,3),r.click(this,"Wizards Task","robot",90,4,15,5,!0),r.click(this,"Mysterious Cavern","monk",112,16,4,3),r.click(this,"The Bear","wizard",171,35,30,10),r.click(this,"Snow Wastes","snow",140,30,30,15,!0),r.click(this,"The Bridge","bridge",110,39,25,5,!0),r.click(this,"The Arena","arena",80,30,20,10),r.click(this,"Tresabor","treeCity",33,18,15,10),r.click(this,"Approach the Tree","treeTwo",30,29,30,10,!0),r.click(this,"The Forest","treeOne",1,29,28,8,!0),r.click(this,"The Forest","treeOne",30,40,38,5,!0),r.click(this,"The Desert","ruins",0,6,50,12,!0),r.click(this,"The Beasts Lair","dungeon",0,0,25,6,!0),r.click(this,"House","house",0,38,20,5)},r.mainMap.ascii=["            .                                  /              \\     /   \\                                                    /         \\   .'                          \\                  ","           /_\\'.                             .'   .^.         /\\   /     \\     ^                          .                .'     ^  .  '. '.                          |        \\_      ","          /___\\/'.                          /    .   \\    ^ .'  '.'       '. .' '.                       /$\\              /      / .' '.  \\  :                         \\        /__     ","         /_____\\/ '.            +               /     \\  / \\   .''.         /     \\                      \\ /             /   ,'./ /     \\     ':   ~                    \\______/        ","   +    /_______\\ /             +            ../       .'   './    \\       /       \\                                   ,'   /    /       \\ ^    '.                      /      \\___/    ","   +   /   |~|   \\                         .'         /       \\     '.    ^        .^.           .-.                  /   ,'    /        .' '.    '.            ~   ___/       /   \\    ","                     +                    /          '         ' ^    \\  / \\      /   \\         '|_|'                /   /    .'     .  /     \\     :            __/  .       /         ","                     +                              /          .' '.   .'   '.  .'     '.        ' '                /        /      . ./       '.    '.         /    / \\               .","   '                                               /          /     \\ /    ^  \\/ ^   ^   \\                .^.               :  .^. /   \\         \\     :        |    / \\    ___       / \\       ","                                   .             .'          /       '.   / \\  \\/ \\ / \\   :             .'   '.      .^.    / /   \\     \\         \\   ,'       /      |    /_/_\\      / \\         ","   ,              ^^                            /          .'          \\.'   './   ',  \\   \\    .^.  . /       \\ .^./   \\   .'     '.    '.          .'      _/            | | |       |     ","                                                 ,,,,    .'            /       \\   .'.  '.     /   \\/ \\         /   \\    \\,'         \\      \\       :       /                            ","           .......                +             /    \\....            /       ^ ' /   \\  .\\  .'     \\.^.       /     \\   /.           '.          .'`  ~    |                            ","          /       \\               +             .... /    \\         .'       / \\.'     \\/ \\ /       /   \\    ,'       ','/ \\            \\         :        /     \\___/                   ","  .'''''''.                                    /    \\                      .'  /     /\\/   \\   .'..'     \\  /  .'.    /,'   '..          ''\\     ,'        |_____/_                      "," /         \\                           ^        .                         /   /     /  \\    './           ''../   \\ .'/        '\\              .'        _/        \\__                   ","                                      / \\    . / \\                          .'    .'    \\    /               /    _\\_/           '.         ,''       __/         _/                     ","                                     ./ \\ . / \\/ \\                         /     /       ''./              .'    /_\\ \\                    ,'       __/                                   ","                  .              ^  / \\| / \\/ \\ |  .                            /         .'             ./           \\..           ..''''     ~  /                                      ","                                / \\ / \\  / \\ |    / \\ .                                                  /               \\        .'         ____/                                       ","^   .                        ^  / \\  |  /\\|    ^  / \\/ \\                                                                         :          /                                            "," \\ / \\  .                ^  / \\  |.    //\\\\   / \\  | / \\                                                                        .'       __|                                               \\ "," \\ / \\ / \\  ^  . /\\  ^  / \\ / \\  / \\ ////\\\\\\\\ / \\     |  ^                                                                    ,'        /                                            /      \\_____","| ^ |  /\\  / \\/ \\ ^ / \\ / \\  | ^ / \\  /-/\\-\\   |    .   / \\          ''                                                      :  ~      |              __/                            \\      /"," / \\  /  \\ / \\/ \\/ \\/ \\  |    / \\ | ////--\\\\\\\\   . / \\^ / \\ .                                               ,,             ,.'        /                 \\____/                        \\____/_____"," / \\  /  \\  |  | / \\ ^\\  /\\   ^ \\   /////\\\\\\\\\\  / \\/ /  | / \\                                                           ,'           /                    \\__                       __/  /  ","\\ | .  ||^    ^   | / \\ /  \\ / \\  /////|  |\\\\\\\\\\/ \\ |/ \\ . / \\                                                         :'          _/                   ___/                            /__"," \\ / \\  / \\  / \\  . / \\^/  \\ / \\  ^    |##|   /\\ |.   |^/ \\ |                                                        .'         __/                        \\__                         /"," \\ / \\  / \\  / \\ / \\ |/ \\|| ^ |  / \\    ^    /  \\/ \\^ / \\ \\.             *               ,,,                        .'         /                                                          ","|   |    |    |  / \\  / \\  / \\ ^ / \\   / \\   /  \\/\\/ \\/ \\|/ \\                                                      :           |                                                           ","                  |    |   / \\/ \\ |  ^ / \\ ^  ||/  \\ \\ |  / \\                                                       '.   ~      \\___                                                      ","                            | / \\   / \\ | / \\   ^  \\|.  .  |                                                          ',       ~    \\                                                    ","   ,,,                ,,,      |  ^ / \\   / \\  / \\ _/ \\/ \\                                                             :..           \\,                                                   ","                                 / \\ |^    |   / \\| / \\/ \\                                           ^    ^     ^     ^   ^',          \\                                                    ","                                 / \\ / \\   ^    |   .|  |           '''                             ^|====|=====|=====|===| ''.        \\_        \\__                                          ","                            ,,    |  / \\  / \\   ^  / \\                              ^ .----------. ^|=                       :  ~      \\   \\___/                                        __               ","                                      |   / \\  / \\ / \\                              |'.__________.'|=                      .'           \\__/__   \\__                                   /  \\             ","                                           |   / \\  |                               |      __      |                      :              /   \\__/                                  .''    ''.___           ","                                                |                                    '.___|  |___.'                     ,,:       ~ ____/  __/  \\__                               /        ___  '.________  ","          ___                                                                                                         .;           /        \\                              ____.''    __  / , \\            ",'         /\\__\\                 .                                                                                      ;-----------;                                       /"\\                            ',"    .^.  ||  |                                                                                                       / / / / / / /                                        \\_________                        ","                                                                                                                  .''''''''''''''                                          ' ' ' ' ''.                       ","                               ,,,                                    ,,,                             *          ;              /                                             .__.__.__\\                     ","                  _                                                                                            .'         ~   .'                                                                              "],r.treeCity=new r.Location,r.treeCity.name="Tresabor",r.treeCity.slug="treeCity",r.treeCity.prev="mainMap",r.treeCity.prevName="Map",r.treeCity.ascii=["        ///////\\\\\\\\\\\\\\         //////////////\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\ ///////\\\\\\\\\\\\\\             |       |           |              ","      /////////\\\\\\\\\\\\\\\\\\     ////////////////\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\//////\\\\\\\\\\\\              |       |           |              ","       ////////\\\\\\\\\\\\\\              |                   |    ///////\\\\\\\\\\\\\\             |       |     |     |              ","    ///////////\\\\\\\\\\\\\\\\\\\\           |      |            |    ///////\\\\\\\\\\\\\\\\      .     |   |         |     |              ","  /////////////\\\\\\\\\\\\\\\\\\\\\\\\\\        |      |            |  /////////\\\\\\\\\\\\\\\\\\    / \\   .'   |         |     '.             ","         |          |               |                   |   .    |    |          / \\  |                       |            ","         |  |       |               |             |     |  / \\   |    |     .     |   |          ___          |      .     ","         |      |   |              .'  |          |     '. / \\  .'    '.   / \\        |   |    .'   '.        |     / \\    ","        /       |    \\    /\\   .  /               |       \\ |   |  __  |   / \\        |        |     |        |     / \\    ","        |    _____   |   /  \\ / \\ |      _____            |     |  ||  |    |         /        /:___:\\     |   \\     |     ","        |   |     |  |   /  \\ / \\ |     /     \\           |                      ...''        /:_____:\\    |    ''...      ","________|___|     |__|____||___|__|_____|     |___________|___________________.''            /:_______:\\             '.   ","                                                                                             :_________:              '. ","____________________________________________________________________  __________________________________________________\\","                                                                    \\ \\____                                                ","                      ______________             ______________      \\____ \\                   .                           ","                    .'   / \\        '.         .'           / \\'.         \\ \\____      ______ / \\  __________   ______ .__ ","                   /      |     .     \\       /     .        |   \\         \\____ \\    /  ..  \\/ \\ /   ....   \\ / ...  / \\ \\","                  /     .      / \\     \\     / .   / \\            \\             \\ \\___|  ||  |_|__|   |  |   |_| | |  / \\ |","                 :     / \\     / \\      :   : / \\  / \\   .'''....' :             \\_____________________________________|___","                 |     / \\      |       |   | / \\   |  .'          |                                                       ","                 |      |               |   |  |      ;            |                                                       "],r.treeCity.initClicks=function(){r.click(this,"The King","treeGovernment",92,6,12,7),r.click(this,"Slums","slums",83,15,40,5),r.click(this,"","treeSecret",66,8,2,2),r.click(this,"The Elder","treeInn",40,9,7,3),r.click(this,"Shop","treeShop",12,9,7,3)},r.treeSecret=new r.Location,r.treeSecret.name="? ? ?",r.treeSecret.ascii=[""],r.treeSecret.dialogue=e.secret,r.treeSecret.specialText=!0,r.treeSecret.prev="treeCity",r.treeSecret.prevName="Tresabor",r.treeShop=new r.Location,r.treeShop.name="The Shop",r.treeShop.prev="treeCity",r.treeShop.prevName="Tresabor",r.treeShop.ascii=["                                                                                              ___________________________| |_____-'-              ","                                                                                             /    ____________________   |          |             ","                                                                                             \\___________________________|  _____   |             ","                                                                                                                         |_|     '-'              ","                                                                                           [=]                                                    ","                                                                                 [=]      /   \\                       .------.                    ","                                                                                 | |     /  |  \\    [=] [=]          /_______ \\                   ","                                                                                 | |    /   |   \\   | | | |         (|--  --,'(=).                ","                                                                                /   \\   \\   |   /   | | | |        . |>o  o<  | /\\\\.              ","                                                                           ____/_____\\___\\_____/____|_|_|_|_      ( .|  /,    ||  |\\)             ","                                                                          |_________________________________|   ( .( \\  __.  /||  |/.)            ","                                                                                                               . ( . (\\_____/ |)\\/ .) )           ","                                                                                                              (. . ( ____|    |_)_.)_. )          ","                                                                                                               ( .__/              ___\\__         ","                                                                                                                 /  \\_.--.\\/.---._/      \\        ","                                                                                             ________//         /    :    :               \\       ","                                                                                             \\______  \\         \\    '.___..____.' /\\  /  /       ","                                                                                                    \\  \\        / \\__/ |  ><     \\/  \\___/\\       ","                                                                                                     \\  \\      /  /    |  ><     /      \\  \\      ","                                                                                                      \\  \\    /  /     |  ><     |       \\  \\     ","                                                                                                       \\  \\  /  /     /   ><      \\       \\  \\    ","                                                                                                        \\  \\/  /     /   /  \\     /\\      /  /    "],r.treeInn=new r.Location,r.treeInn.name="The Elder",r.treeInn.ascii=["                                                                                          _________________          ","                                                                                         /                 \\        ","                                                                                        /                   \\       ","                                                                                       /                     \\      ","                                                                                      |.''''.   .''''''.    _|      ","                                                                                      |>.--.     .---. <   |  |     ","                                                                                      |      |           ) / /    ","                                                                                      \\     /             __/       ","                                                                                      |  / (__.)  \\   /  |          ","                                                                                      | / .______\\ \\ |   |          ","                                                                                       \\   \\       / |   /          ","                                                                                        \\_          ____/           ","                                                                                          \\________//   |           ","                                                                                             |\\    /    |           ","                                                                                    _________|    /  /   \\_____________","                                                                                   /       //|            \\\\           '.","                                                                                  /        \\\\_____________//             \\ ","                                                                                 /          \\_____________/               |","                                                                                /                                         |","                                                                                |    /                                    |","                                                                                |    |                            |       |","                                                                                |    |                            |       |"],r.treeInn.specialText=!0,r.treeInn.dialogue=e.enchant,r.treeInn.prev="treeCity",r.treeInn.prevName="Tresabor",r.treeSlums=new r.Location,r.treeSlums.name="The Slums",r.treeSlums.initClicks=function(){r.click(this,"Destitute Man","slumsBum",105,12,5,4),r.click(this,"Inn","slumsInn",64,11,6,5),r.click(this,"Suspicious Men","slumsThugs",42,11,13,5)},r.treeSlums.prev="treeCity",r.treeSlums.prevName="Tresabor",r.treeSlums.ascii=["            `                              ////\\\\\\\\                                                   ///\\\\\\                                      /////\\\\\\\\\\              ","           `                                ///\\\\\\                                                   ////\\\\\\\\\\                                  ///////\\\\\\\\\\\\\\            ","             `                            /////\\\\\\\\                                                //////\\\\\\\\\\\\\\                                 //////\\\\\\\\\\\\\\            ","           ___                             ////\\\\\\\\                                                //////\\\\\\\\\\\\                              ///////////\\\\\\\\\\\\\\\\\\         ","          |   |                            ////\\\\\\\\                                              ////////\\\\\\\\\\\\\\\\\\                            //////////\\\\\\\\\\\\\\\\\\         ","       ___|   |________________________ ///////\\\\\\\\\\\\       ______________________________________///////\\\\\\\\\\\\\\\\                           ////////////\\\\\\\\\\\\\\\\\\\\\\\\      ","      /         ~~~~~~                 \\///////\\\\\\\\\\\\      /            ~~~~                       \\/////\\\\\\\\\\\\\\_____________________________///////////\\\\\\\\\\\\\\\\\\\\\\       ","     /    ~~~                ~~~~       \\//////\\\\\\\\\\\\\\\\   /   ~~~~                           ~~~    \\////\\\\\\\\\\\\/    ~~                    //////////////\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\   ","    /____________________________________\\   |  |        /___________________________________________\\  | |   /____________________________/////////////\\\\\\\\\\\\\\\\\\\\\\\\\\     ","    |                                    |   |  |        |                                           |  | |   |                             ////////////\\\\\\\\\\\\\\\\\\\\\\       ","    |    ____                   ____     |   |  |        |    __         __        __        __      |  | |   |                            /////////////\\\\\\\\\\\\\\\\\\\\\\\\      ","    |   |    |                 |    |    |               |   |__|       |__|      |__|      |__|     |  | |   |                                     |    | |              ","    |   |____|         ____    |____|    |    O     O    |        ____                               |        |     ___        _____         _____  |      |              ","    |                 |    |             |   /|\\   /|\\   |       |    |        ___     ___           |       O|    |   |       |   |         |   |  |   |  |              ","    |                 |o   |             |    |     |    |       |o   |       |___|   |___|          |      .||    |   |       |___|         |___|  |      |              ","    |                 |    |             |   / \\   / \\   |       |    |                              |     __/|    |   |                            | |    |              ","                                                                                                                                                    | |    |              ","                                                                                                                                                    |    | |              ","                                                                                                                                                    |      |              "],r.treeSlumsInn=new r.Location,r.treeSlumsInn.name="The Sleepy Sapling",r.treeSlumsInn.prev="slums",r.treeSlumsInn.prevName="Slums",r.treeSlumsInn.specialText=!0,r.treeSlumsInn.dialogue=e.inn,r.treeSlumsInn.ascii=["                                                                                                                                                            ","                                                                                                                                                            ","                                                                                            _________                                                       ","                                                                                           /\\\\\\\\\\\\\\\\\\\\                                                      ","                                                                                           | ==  ==  |                                                      ","                                                                                          (|  o  o   |)                    ______________________           ","                                                                                           |  (__)   |               ______|_FRESHLY BAKED PIES_|______     ","                                                                                           | .____.  |              |                ||                |    ","                                                                                           \\__    __/               |                ||                |    ","                                                                                  .---._____| '--'  |_____.---.     |                ||                |    ","                                                                                 /    |   \\          /    |    \\    |  oooooooooooo  ||  oooooooooooo  |    ","                                                                                |     |    \\________/     |     |   |___\\________/___||___\\________/___|    ","                                                                                /     |                   |     \\   |                ||                |    ","                                                                               |      |                   |      |  |                ||                |    ","                                                                               |      |                   |      |  |                ||                |    ","                                                                               |      |                   |      |  |  oooooooooooo  ||  oooooooooooo  |    ","                                                                               |      |                   |      |  |___\\________/___||___\\________/___|    ","                                                                               |      |                   |      |  |                ||                |    ","                                                                                \\     |                   |     /   |                ||                |    ","                                                                                |     |                   |    |    |                ||                |    ","                                                                               /      |                   |     \\   |  oooooooooooo  ||  oooooooooooo  |    ","                                                                              |       |                   |      |  |___\\________/___||___\\________/___|    ","                                                                              |       |                   |      |  |                ||                |    "],
r.treeSlumsThugs=new r.Location,r.treeSlumsThugs.name="Angry Thugs",r.treeSlumsThugs.prev="slums",r.treeSlumsThugs.prevName="Slums",r.treeSlumsThugs.specialText=!0,r.treeSlumsThugs.dialogue=e.slumThugs,r.treeSlumsThugs.ascii=["                                                                                                                                                       ","                                                                                                                                                       ","                                                                                                     \\\\//\\\\//\\\\//                                      ","                                                                               _______               /__    //\\\\\\          .'''''''''''''.             ","                                                                              /       \\             | <      \\\\//|         '_____________'             ","                                                                             /   __\\\\\\|            C.         B \\|        (_______________)            ","                                                                            /  .'                   <            |         (<--.  .--.  \\|             ","                                                                           /   |                    <           /           \\ o   o      |             ","                                                                           |   |      ___            |_________/            /   |        ))            ","                                                                          '     '.  .'   '.   ____    |       |      ____  |   (__.      |             ","                                                                          |       |/       \\''    ''._|       |___.''    '' \\   ___.   .'              ","                                                                          |       |                                          \\_     __/|               ","                                                                          \\                                                    \\_._/   |               ","                                                                           \\______                                        ____.-'       '-._____       ","                                                                                  '--.___.--'.           |              -'      \\       /       '-     ","                                                                                              |          |          |  /         '--.--'          \\    ","                                                                                              |   .      |      .   | /                            \\   ","                                                                                               \\ ______ / \\ ______ / /    |                   |     \\  ","                                                                                               (                    /     |                   |      \\ "],r.treeSlumsBum=new r.Location,r.treeSlumsBum.name="Bum",r.treeSlumsBum.prev="slums",r.treeSlumsBum.prevName="Slums",r.treeSlumsBum.dialogue=e.bum,r.treeSlumsBum.specialText=!0,r.treeSlumsBum.ascii=["                                                                                                         ","                                                                                                             ","                                                                                       /\\\\\\\\\\\\               ","                                                                                      //\\\\\\\\\\\\\\              ","                                                                                      /|'| '  |\\             ","                                                                                      /| __   |\\             ","                                                                                      /\\_____/\\\\             ","                                                                                      ///|___|\\\\_            ","                                                                               ______/___________\\__         ","                                                                              |                     |.       ","                                                                             /|  ASPIRING MUSICIAN  | \\      ","                                                                             \\_|                   |__/      ","                                                                              |   ANYTHING HELPS    |        ","                                                                              |_____________________|        ","                                                                                       |       |             ","                                                                                       |_______|             ","                                                                                       |       |             ","                                                                                       |  ___  |             ","                                                                                       |   |   |             ","                                                                                       |   |   |             "],r.monk=new r.Location,r.monk.name="The Cavern",r.monk.slug="monk",r.monk.prev="mainMap",r.monk.prevName="Map",r.monk.specialText=!0,r.monk.dialogue=e.monk,r.monk.ascii=["                                                                                                                         ","                                                                                                     _____               ","                                                                                                    /     \\              ","                                                                                                    |.  . |)             ","                                                                                                    | '_  /              ","                                                                                                     \\___/|              ","                                                                                                  ____|   |___           ","                                                                                                 |    \\   /   |          ","                                                                                                 |     \\ /    |          ","                                                                                                 |  |   \\   | |          ","                                                                                                 |  |    \\  | |          ","                                                                                                 |  |     \\ | |          ","                                                                                                 |  |      \\| |          ","                                                                                                 |  |       | |          ","                                                                                                 |  |_______| |          ","                                                                                                 |__|       |_|          ","                                                                                                 | |        | |          ","                                                                                                 '.|        |.'          ","                                                                                                   |        |            ","                                                                                                   |        |            "],r.cabin=new r.Location,r.cabin.name="A Cabin",r.cabin.slug="cabin",r.cabin.dialogue=e.cabin,r.cabin.specialText=!0,r.cabin.prevName="Map",r.cabin.prev="mainMap",r.cabin.ascii=["                                                                                                                                                  ","                                                                                                  wwwwwwwwwwwwwwwwww                              ","                                                                                                  |_____ |______  wwww                            ","                                                                                   s               \\ =  |  \\  =     w |               s           ","                                                                                   S               |   (___.        __/               S           ","                                                                                   _               |   _____        |                 _           ","                                                                                  | |               \\__'      _____/                 | |          ","                                                                                  | |                  \\_.___/|  |                   | |          ","                                                                                __| |             _____||     |  |______             | |__        ","                                                                               |||| |            /    /| \\   /  / \\     \\            | ||||       ","                                                                               |____\\\\          /    / \\       /   \\     \\           //____|     ","                                                                                 \\  \\          /   |/o__\\     /____o\\     \\          /  /         ","                                                                                  \\/ \\        /   |    / \\  /  \\           \\        / \\/          ","                                                                                  |   \\_ ____/    |   /   \\/    \\           \\____ _/   |          ","                                                                                  \\     \\ /       |  /o___/_____o             \\  /    /           ","                                                                                   \\__          __|      /            \\__          __/            ","                                                                                      \\_     __/   |    /              | \\      __/               ","                                                                                        \\___/       |  |              |   \\____/                  ","                                                                                                    |  |              |                           ","                                                                                                    |/ |              |                           ","                                                                                                    |__|_______________|                          ","                                                                                                    |                  |                          ","                                                                                                    |                  |                          "],r.wizard=new r.Location,r.wizard.name="The Wizard",r.wizard.slug="wizard",r.wizard.prev="mainMap",r.wizard.prevName="Map",r.wizard.specialText=!0,r.wizard.dialogue=e.wizard,r.wizard.ascii=["                                                                                         ","                                                                                         ","                                                                                         ","                                                                                         ","                                                                                         ","                                                                                                          \\  )(  /                     ","                                                                                                           \\//\\\\/                      ","                                                                                             ( >>\\\\\\\\\\  ---((*.))---                   ","                                                                                             )| . . |)     /\\\\//\\                      ","                                                                                            ( |  |  |(    /  ||  \\                     ","                                                                                             )\\ mmm / )      ||                        ","                                                                                            (__mMMMm_(_     (__)                       ","                                                                                           /   mMMMm   \\    /||                        ","                                                                                          | |  mMMMm  \\ \\  / ||                        ","                                                                                          | |   MMM   |\\ \\/  ||                        ","                                                                                          | |   mMm   | \\__  ||                        ","                                                                                          | |   mMm   |    \\ ||                        ","                                                                                          | |____M____|     \\||                        ","                                                                                          | |    m    |      ||                        ","                                                                                          |_|         |      ||                        ","                                                                                            |         |      ||      ","                                                                                            |         |      ||      ","                                                                                            |_________|      ||      "],r.wizard.ascii2=["                                                                                                                                                    ","                                                                               )(                                     ~  \\  )(  /  ~               ","                                                                              ))((                                 ~    ~ \\//\\\\/ ~   ~             ","                                                                             ((()))                                    ---((X.))---                ","                                                                             \\_  _/             ( >>\\\\\\\\\\           ~   ~ /\\\\//\\ ~   ~             ","                                                                               \\  \\             )| . . |)             ~  /  ||  \\  ~               ","                                                                                \\  \\           ( |  |  |(                 ~ || ~                   ","                                                                                 \\  \\           )\\ mmm / )                  ||                     ","                                                                                  \\  \\_________(__mMMMm_(___________________||                     ","                                                                                   \\/ _________   mMMMm   _________      |_(__)                    ","                                                                                   |  |        |  mMMMm  |         \\     |  ||                     ","                                                                                   |  |        |   MMM   |          \\    |  ||                     ","                                                                                   |  |        |   mMm   |           \\   |  ||                     ","                                                                                   |  |        |   mMm   |            \\  |  ||                     ","                                                                                   | /         |____M____|             \\ |  ||                     ","                                                                                   |/         /     m     \\             \\|  ||                     ","                                                                                             /             \\                ||                     ","                                                                                            /               \\               ||                     ","                                                                                           /                 \\              ||                     ","                                                                                        __/                   \\__           ||                     ","                                                                                        \\_______________________/                                  ","                                                                                             _/_/       \\_\\_                                       ","                                                                                            (___|       |___)                                      "],r.wizard.ascii3=["                                                                                         ","                                                                                                                               __                        ","                                                                                                /\\                           _/  \\__                     ","                                                                                             /\\/  \\/\\                      _/       \\__                  ","                                                                                            /    .   \\                   _/   _/\\_     \\__               ","                                                                                           /    / \\   \\/|              _/   _/____\\_      \\__            ","                                                                                        |\\|  /\\/   \\    |/|          _/   _/        \\_       \\_          ","                                                                                        |   |   /|\\ \\/\\   |         /   _/            \\_       \\         ","                                                                                        | |\\|  / | \\   |  |         |  / | .|.    .|.   \\_      |        ","                                                                                      |\\| |   |  |  |  |  |/\\       |  | |- o -  - o -  | \\_    |        ","                                                                                      |   |   |  |  |  |     |      |  | | '.' /| '.'   |   |   |        ","                                                                                      | |\\|   |  |  |  |/\\   |      |  |  \\____________/|   |   |        ","                                                                                      | |     |  |  |     |  |      |  |    \\/\\/\\/\\/\\/\\/|   |   |        ","                                                                                    |\\| \\     |  |  |     |  |      |  |     |          |   |   |        ","                                                                                    \\   _\\    |  |  |     |  |      |  |   /\\/\\/\\/\\/\\/\\_/   |   |        ","                                                                                    _\\  \\     |  |  |    /_  |      |  |   \\____________/   |   |        ","                                                                                    \\    \\    |  |  |     /  |/|    |   \\_       |__|     _/   _/        ","                                                                                     \\    |   |  |  |    /    /    __\\__  \\_ ____|__|____/  __/_____     ","                                                                                      \\_  |   |  |  |   /    /    /     \\__ \\_ ______ __/ _/       |\\    ","                                                                                        \\_ \\  |  |  |  /  __/    /         \\_ \\___||__/ _/         | \\   ","                                                                                      __  \\_\\ |  |  | /__/ __   /            \\ \\__||_/ /           |  \\  ","                                                                                     /  \\___\\\\|  |  |//___/  \\ /              \\_ \\||/ /            |   \\ ","                                                                                    /    _____       _____    \\                 \\ \\/ /             |    |"],r.wizard.currentAscii="ascii",r.wizard.asciiCheck=function(){if(r.progress.lichReveal)return r.wizard.name="The Lich","ascii3";var t=e.wizard.ascii;return"regular"===t?"ascii":"spell"===t?"ascii2":"ascii3"},r.house=new r.Location,r.house.name="? ? ?",r.house.slug="house",r.house.prev="mainMap",r.house.prevName="Map",r.house.specialText=!0,r.house.dialogue=e.house,r.house.ascii=["                                                                                                               ","                                                                                                               ","                                                                                             88888888888       ","                                                                                           888888888888888     ","                                                                                           |___    ___   88    ","                                                                                           / . \\__/ . \\__|8    ","                                                                                           \\___/| \\___/  |     ","                                                                                           |    <        |     ","                                                                                           |  | __ |     |     ","                                                                                           \\__|____|____/      ","                                                                                           _____|\\  /  |_____  ","                                                                                          /     '------'     \\ ","                                                                                         /                    \\","                                                                                         |      /\\___/\\       |","                                                                                         |     /  _ _  \\      |","                                                                                      ____     | > . < |   |  |","                                                                                     /    \\     '-----'    |  |","                                                                                   .'\\___ /      MEOW!     |  |","                                                                                  /_/  | |                 |  |","                                                                                       | |                 |  |","                                                                                       | |                 |  |","                                                                                       | |   ______________|  |"],r.arena=new r.Location,r.arena.name="The Arena",r.arena.slug="arena",r.arena.prev="mainMap",r.arena.prevName="Map",r.arena.specialText=!0,r.arena.dialogue=e.arena,r.arena.ascii=["                                                                                                                                                   ","                                                                                                            __ __ ___ ___ ___                       ","                                                                                                            \\_/   \\__\\\\__\\\\__\\                      ","                                                                                                            //    /__//__//__/                      ","                                                                                     _________               |  _    __     \\                       ","                                                                                     |       |               | /_\\  /__\\    |                       ","                                                                                     | o o o |               |    /|        |                       ","                                                                                     \\__   __/                |_________|   |                       ","                                                                                        | |                    |_|_|_|_|    |                       ","                                                                                       \\\\\\\\                    _________|  /                        ","                                                                                        \\\\\\\\|                  \\__________/                         ","                                                                                        |\\_ |               ________|___|______________             ","                                                                                       /___\\\\              /       /|___|\\             \\            ","                                                                                            \\\\            /        \\\\___//              \\           ","                                                                                             \\\\          /        __/| |\\__              \\          ","                                                                                              \\\\        /       _/_  | |  _\\___           \\         ","                                                                                               \\\\      /    ___/___| | | |_____\\_____      \\        ","                                                                                                \\\\    /____/_______  | |  _________/ \\_____ \\       ","                                                                                                 \\\\  |//   \\_______| | | |__________/|     \\\\|      ","                                                                                                  \\\\ //     _______  | |  ___________|      \\\\      "],r.treeGovernment=new r.Location,r.treeGovernment.name="King Treemaster",r.treeGovernment.prev="treeCity",r.treeGovernment.prevName="Tresabor",r.treeGovernment.specialText=!0,r.treeGovernment.dialogue=e.treeKing,r.treeGovernment.ascii=["                                                                                                  __/                                                       ","                                                                                                    \\   \\/ __\\   \\_/   __/                                  ","                                                                                               __\\   \\/ /_   /    \\   /__                                   ","                                                                                                  \\__/__\\___/___\\_/__/   \\                                  ","                                                                                                     \\____________/                                         ","                                                                                                     ccdcdDCcdcDCdc                                         ","                                                                                                      | O    O  `8c                                         ","                                                                                                      |   |       ))                                        ","                                                                                                      |  C.      .'                                         ","                                                                                                       \\ ___.   ;|                                          ","                                                                                                        \\_____.' |                                          ","                                                                                                          |      |                                          ","                                                                                                __________|      |____________                              ","                                                                                               '\\         \\ _ ___/           /`.                            ","                                                                                              /  \\__       |||          ____/   \\                           ","                                                                                             /      \\__    |||     ____/         \\                          ","                                                                                            /          \\_ / | \\__ /               \\                         ","                                                                                           /             | ||| |                   \\                        ","                                                                                          /            .'  .|.  '.                  \\                       ","                                                                                         /           .'|  /   \\  |'.                 \\                      ","                                                                                        /          .'| | /     \\ | |'.                \\                     ","                                                                                       /         .'  | |/|     |\\| |  '.               \\                    "],
r.lich=new r.Location,r.lich.name="The Lich",r.lich.slug="lich",r.lich.prev="mainMap",r.lich.prevName="Map",r.lich.specialText=!0,r.lich.dialogue=e.meteor,r.lich.specialText=!0,r.lich.ascii=[""],r.ending=new r.Location,r.ending.name="The End",r.ending.slug="ending",r.ending.prev="mainMap",r.ending.prevName="Map",r.ending.specialText=!0,r.ending.dialogue=e.ending,r.ending.ascii=[""],r.currentLocation=s(),r.locationDictionary.mainMap=this.mainMap,r.locationDictionary.treeCity=this.treeCity,r.locationDictionary.treeSecret=this.treeSecret,r.locationDictionary.treeGovernment=this.treeGovernment,r.locationDictionary.treeInn=this.treeInn,r.locationDictionary.treeShop=this.treeShop,r.locationDictionary.slums=this.treeSlums,r.locationDictionary.slumsInn=this.treeSlumsInn,r.locationDictionary.slumsThugs=this.treeSlumsThugs,r.locationDictionary.slumsBum=this.treeSlumsBum,r.locationDictionary.wizard=this.wizard,r.locationDictionary.monk=this.monk,r.locationDictionary.house=this.house,r.locationDictionary.arena=this.arena,r.locationDictionary.lich=this.lich,r.locationDictionary.cabin=this.cabin,r.locationDictionary.ending=this.ending}angular.module("app.main").service("mainService",e),e.$inject=["dialogueService","levelService","progressService","templateService","messageService","playerService"]}(),function(){"use strict";function e(e,t){function i(e,t,i){e.$watch("messageerror",function(){"true"===i.messageerror?t.addClass("error"):t.removeClass("error")})}var a=(e.bad,{link:i,restrict:"A",scope:{messageerror:"@"}});return a}angular.module("app.message").directive("messageDirective",e),e.$inject=["messageService","mainService"]}(),function(){"use strict";function e(){this.mainMessage="",this.locationText="",this.messageError=!1,this.updateMainMessage=function(e,t){this.mainMessage=e,this.messageError=t?!0:!1},this.emptyLog=function(){this.messageLog=[]},this.addMessage=function(e){this.messageLog.length>2&&this.messageLog.shift(),this.messageLog.push(e);var t=angular.element("#log");t.scrollTop=t.height}}angular.module("app.message").service("messageService",e),e.$inject=[]}(),function(){"use strict";function e(e,t){var i=this;i.progress=t.progress,i.train=function(t){t=t[0].toUpperCase()+t.slice(1);var a="train"+t;"Health"===t?t="Heal":"Defense"===t?t="Block":"Battle"===t&&(t="Berserk"),i.progress[a]=!0,i.progress.canLearn=i.progress.canLearn-1,e.updateMainMessage("You have learned "+t+"!")}}angular.module("app.monk").service("monkService",e),e.$inject=["messageService","progressService"]}(),function(){"use strict";function e(e,t,i,a){function n(e){_.health=e.health,_.baseHealth=e.baseHealth,_.weapon=e.weapon,_.armor=e.armor}function o(){var e=_;if(localStorage.playerSave){var t=JSON.parse(atob(localStorage.playerSave));n(t)}return e}function s(){_.initRegen=!0}var r=this;r.itemDictionary=e.itemDictionary,r.progress=i.progress,this.Player=function(){this.rest=function(){this.active?t.updateMainMessage("You cant rest right now!",!0):(this.health=this.maxHealth,t.updateMainMessage("You feel well rested!"))},this.abilities={keys:["berserk","block","heal"],berserk:{name:"Berserk",slug:"berserk",text:"Attacks deal double damage",checkUnlock:function(){return r.progress.berserk},active:!1,timer:0,max:100,cd:0,cdMax:200,special:function(){this.timer=this.max,this.active=!0}},block:{name:"Block",slug:"block",text:"Blocks incoming damage",checkUnlock:function(){return r.progress.shield},active:!1,timer:0,max:50,cd:0,cdMax:200,special:function(){this.timer=this.max,this.active=!0}},heal:{name:"Heal",slug:"heal",text:"Heals over few seconds",checkUnlock:function(){return r.progress.healing},active:!1,timer:0,max:50,cd:0,cdMax:400,special:function(){this.timer=this.max,this.active=!0}},resetAbilities:function(){for(var e=0;e<this.keys.length;e++)this[this.keys[e]].active=!1,this[this.keys[e]].cd=0,this[this.keys[e]].timer=0}},this.findDPS=function(){var e=8*this.damage/this.attackSpeed;return e=e.toFixed(2)},this.specialEnd=void 0,this.money=1e3,this.usePotion=function(){if(e.itemDictionary.potion[1][1]>0){if(this.potionCD<=0){var i=parseFloat(this.health);return this.health=(i+this.maxHealth/2).toFixed(2),e.itemDictionary.potion[1][1]=e.itemDictionary.potion[1][1]-1,this.potionCD=300,!0}t.updateMainMessage("Potions are on cooldown!",!0)}else t.updateMainMessage("You have no potions.",!0)},this.potionCD=0,this.healthPercent=function(){var e=this.health/this.maxHealth*100;return e},this.checkMaxHealth=function(){this.health>this.maxHealth&&(this.health=this.maxHealth)},this.healthRegen=function(){if(this.initRegen){if(this.health<0&&(this.health=0),this.health<this.maxHealth){var e=parseFloat(this.health);this.health=(e+this.regen).toFixed(2),this.abilities.heal.active&&(e=parseFloat(this.health),this.health=(e+.25*this.maxHealth).toFixed(2))}this.checkMaxHealth()}},this.healthBarUpdate=function(e){this.checkMaxHealth();var t=this.healthPercent();this.healthWidth=t>65?{"background-color":"green",width:t+"%"}:t>40?{"background-color":"orange",width:t+"%"}:{"background-color":"red",width:t+"%"}},this.updatePosition=function(e,t,i,a){t[0]=e[0],t[1]=e[1],e[1]=e[1]+a,e[0]=e[0]+i},this.prevTile=function(e,t){t[e[1]]=setCharAt(t[e[1]],e[0],"_")},this.endLevel=function(){return t.addMessage("You have reached the end of the level!"),this.active=!1,this.levelComplete=!0,t.updateMainMessage("You finish the level!"),!0},this.checkLevelEnd=function(e,t){t[e[1]].length<=e[0]?this.endLevel():"undefined"!=typeof this.specialEnd&&this.specialEnd<=e[0]&&this.endLevel()},this.checkGrounded=function(e){return e.grounded?(e.grounded=!1,!0):!1},this.prevCheckFunc=function(e){e.prev?(e.prevCheck=!0,e.prev=!1):e.prevCheck=!1},this.checkForEnemy=function(e,t,i){e.inCombat=!1;for(var a=0;a<t.length;a++)i[e.position[1]][e.position[0]+e.speed]===t[a].symbol&&(e.inCombat=!0)},this.collisionCheck=function(e,i){var a=this;if(a.levelComplete=!1,!a.alive)return void t.updateMainMessage("You have been slain.",!0);a.checkLevelEnd(a.position,e);var n=(a.checkGrounded(a),!1);a.prevCheckFunc(a),a.checkForEnemy(a,i,e)," "!==e[a.position[1]+1][a.position[0]]&&"_"!==e[a.position[1]+1][a.position[0]]||a.prevCheck?" "===e[a.position[1]][a.position[0]+a.speed]?(a.prevCheck&&a.enemyLastTurn&&(a.prev=!0),a.updatePosition(a.position,a.positionOld,a.speed,0)):"_"===e[a.position[1]][a.position[0]+a.speed]?(a.prev=!0,a.updatePosition(a.position,a.positionOld,a.speed,0)):a.inCombat?(a.enemyLastTurn=!0,n=!0,a.prevCheck&&(a.prev=!0)):a.inCombat||a.updatePosition(a.position,a.positionOld,a.speed,-1):(a.updatePosition(a.position,a.positionOld,0,1),"_"===e[a.position[1]][a.position[0]]&&(a.prev=!0)),n||(a.enemyLastTurn=!1)},this.calculateTotalDamage=function(){this.attackSpeed=this.weapon.attackSpeed;var t=this.weapon.damage;return this.abilities.berserk.active&&(t=2*this.weapon.damage),e.statReset&&(this.armorCheck=!1,e.statReset=!1),"undefined"==typeof this.armor.damageMult||this.armorCheck?this.armorCheck||e.findVal():(this.armorCheck=!0,e.stats.damageMult=this.armor.damageMult+e.stats.damageMult),t+=e.stats.damage,t+=t*(e.stats.damageMult/100),t=t.toFixed(2)},this.calculateTotalArmor=function(){var t=this.armor.armor+e.stats.defense;return t+=t*(e.stats.defenseMult/100),this.abilities.block.active&&(t=1),t=t.toFixed(2)},this.calculateTotalHealth=function(){var t=this.baseHealth+e.stats.health;return t+=t*(e.stats.healthMult/100)},this.calculateTotalEvasion=function(){var t=e.stats.evade;return t},this.trueSelf=function(e){r.itemDictionary[e][1][1]=1},this.armorCheck=!1,this.inCombat=!1,this.active=!1,this.ground=!1,this.evade=this.calculateTotalEvasion(),this.health=100,this.baseHealth=100,this.maxHealth=this.calculateTotalHealth(),this.regen=1,this.alive=!0,this.prev=!1,this.prevCheck=!1,this.speed=1,this.position=[0,0],this.positionOld=[0,0],this.initPosition=function(){this.positionOld=this.position},this.position=[0,0],this.positionOld=[0,0],this.name="Player",this.symbol="Y",this.desc="This is you",this.armor=r.itemDictionary.clothArmor[0][1],this.armorValue=this.calculateTotalArmor(),this.weapon=r.itemDictionary.fists[0][1],this.damage=this.calculateTotalDamage(),this.attackSpeed=this.weapon.attackSpeed,this.initRegen=!1};var _=new this.Player;this.player=o(),this.player.calculateTotalDamage(),this.player.calculateTotalHealth(),this.player.calculateTotalArmor(),a(function(){s()},1e3)}angular.module("app.player").service("playerService",e),e.$inject=["inventoryService","messageService","progressService","$timeout"]}(),function(){"use strict";function e(){function e(){var e;return e=localStorage.progressSave?JSON.parse(atob(localStorage.progressSave)):t}var t={elderLearnPoint:!1,hasMap:!1,hasSleepingBag:!1,hasSweater:!1,introComplete:!1,treeKingWorkAccept:!1,treeKingCompliment:!0,ruinsCleared:!1,treeKingWorkHandIn:!1,treeKingIntro:!1,slumBossMet:!1,woodSwordCrafted:!1,woodArmorCrafted:!1,bridgePrompt:!1,bridgeBuilt:!1,forgeActive:!1,trainBattle:!1,trainDefense:!1,trainMoney:!1,canLearn:0,elderMet:!1,pieEaten:!1,innIntro:!1,quizTaken:!1,berserk:!1,shield:!1,healing:!1,freeSample:!1,signedNDA:!1,wizardMet:!1,wizardTask:!1,vialTaken:!1,lichReveal:!1,passCode:!1,levels:{cabin:!1,treeCity:!1,treeOne:!0,house:!0,treeTwo:!1,dungeon:!1,ruins:!1,desert:!1,sea:!1,bridge:!1,snow:!1,snowNorth:!1,shroom:!0,shroomFinish:!1,wizard:!1,robot:!1,arena:!1,monk:!1,lich:!1,theEnd:!0,ending:!0},enemies:{},looted:{}};this.progress=e()}angular.module("app.progress").service("progressService",e)}(),function(){"use strict";function e(e,t,i){function a(){var e;return e=localStorage.resourcesSave?JSON.parse(atob(localStorage.resourcesSave)):o.defaultResources}function n(){var e=1+t.stats.money;return e}var o=this;o.itemDictionary=t.itemDictionary,o.progress=i.progress,o.canBuyMilk=function(){return o.resources.money>o.resources.milkPrice?!0:!1},o.raiseMilkPrice=function(){var e=o.resources.milkPrice;e+=e/2,e=Math.floor(e),o.resources.milkPrice=e},o.defaultResources={money:0,moneyRate:1,milkPrice:500},o.resources=a(),o.calculateTotlMoneyRate=function(){var e=n();return e},o.moneyTick=function(){return o.resources.money=o.resources.money+o.calculateTotlMoneyRate(),o.resources.money}}angular.module("app.resources").service("resourcesService",e),e.$inject=["messageService","inventoryService","progressService"]}(),function(){"use strict";function e(e,t,i,a,n){function o(){for(var e=i.keys,t=[],a=0;a<e.length;a++){var n=[e[a],r.itemDictionary[e[a]][1][1]];t.push(n)}return t}function s(){var e=angular.element(".saving").show();e.removeClass("fade"),n(function(){e.addClass("fade")},1e3)}var r=this;r.player=t.player,r.progress=e.progress,r.resources=a.resources,r.itemDictionary=i.itemDictionary,r.saveGame=function(){r.player=t.player,r.progress=e.progress,r.resources=a.resources,r.itemDictionary=i.itemDictionary,localStorage.potionAmt=btoa(JSON.stringify(r.itemDictionary.potion[1][1])),console.log(r.player),localStorage.playerSave=btoa(JSON.stringify(r.player)),localStorage.progressSave=btoa(JSON.stringify(r.progress)),localStorage.resourcesSave=btoa(JSON.stringify(r.resources)),localStorage.itemSave=btoa(JSON.stringify(o())),s()},r.resetGame=function(){localStorage.clear(),document.location.reload()}}angular.module("app.saving").service("savingService",e),e.$inject=["progressService","playerService","inventoryService","resourcesService","$timeout"]}(),function(){"use strict";function e(e,t,i,a){function n(){c.shopList=[];for(var e=0;e<t.buyableItems.length;e++){var i=t.buyableItems[e],a=t.itemDictionary[i][0][1];a.buyable&&c.shopList.push(a)}}function o(e){e.price>c.resources.money?a.updateMainMessage("Not enough money.",!0):(s(e),l(e))}function s(e){c.resources.money=c.resources.money-e.price}function r(e){e.removeAfterBuy&&(e.buyable=!1,_(e),n())}function _(e){"undefined"!=typeof e.unlock&&(t.itemDictionary[e.unlock][0][1].buyable=!0)}function l(e){"undefined"!=typeof e.special&&e.special(),t.findVal(),a.updateMainMessage(e.name+" has been purchased."),t.itemDictionary[e.slug][1][1]=t.itemDictionary[e.slug][1][1]+1,r(e)}var c=this;c.resources=i.resources,c.itemDictionary=t.itemDictionary,c.initShop=function(){n()},c.initPurchase=function(e){o(e)},c.grabItemDictionary=function(){return c.itemDictionary}}angular.module("app.shop").service("shopService",e),e.$inject=["playerService","inventoryService","resourcesService","messageService"]}(),function(){"use strict";function e(e){var t=this;t.startFireBase=function(e){"undefined"==typeof t.myFirebase?t.myFirebase=new Firebase("https://slomega.firebaseio.com/"):Firebase.goOnline(),t.readData(e)},t.readData=function(i){t.myFirebase.child(i).once("value",function(a){function n(e,i){t.setData(e,i)}var o=a.val();e(function(){n(i,o)},1e3)})},t.setData=function(e,i){var a=t.myFirebase.child(e),n=i+1;a.set(n),Firebase.goOffline()}}angular.module("app.statistics").service("statisticsService",e),e.$inject=["$timeout"]}(),function(){"use strict";function e(){function e(){}this.func=e,this.activeTemplate="app/main/main.html",this.switchTemplate=function(e){this.activeTemplate!==e&&(this.activeTemplate=e)}}angular.module("app.template").service("templateService",e)}(),function(){"use strict";function e(e){function t(){}var i=this;i.structures={campfire:0,tent:0},t(console.log(e))}angular.module("app.town").controller("TownController",e),e.$inject=["$scope"]}(),function(){"use strict";function e(e){e.configureStates(t())}function t(){return[{state:"town",config:{url:"/town",templateUrl:"app/town/town.html",controller:"TownController",controllerAs:"vm",title:"town"}}]}angular.module("app.town").run(e),e.$inject=["routerHelper"]}(),function(){"use strict";function e(e){function t(e,t,n){n.$observe("htImgPerson",function(e){e=i+(e||a),n.$set("src",e)})}var i=e.imageBasePath,a=e.unknownPersonImageSource,n={link:t,restrict:"A"};return n}angular.module("app.widgets").directive("htImgPerson",e),e.$inject=["config"]}(),function(){"use strict";function e(){var e={scope:{title:"@",subtitle:"@",rightText:"@",allowCollapse:"@"},templateUrl:"app/widgets/widget-header.html",restrict:"EA"};return e}angular.module("app.widgets").directive("htWidgetHeader",e)}(),angular.module("app.core").run(["$templateCache",function(e){e.put("app/about/about.html",'<div class=container><p>To reset your game, type "RESET" (without quotes) in the box and hit submit. This will delete your save!</p><form ng-submit=vm.resetGame()><input class=block ng-model=vm.reset><button ng-if=!vm.passComplete type=submit>Reset</button></form><p>Thank you for playing Space Lich Omega 2!</p><p>If you have any questions or find a bug, you can find me on <a href=https://twitter.com/Zertuk target=_blank>Twitter</a> or you can send me an <a href=mailto:just.forcier@gmail.com target=_blank>email</a>.</p><p>Space Lich Omega 2 is built with AngularJS. If you are interested, the source code is on <a href=https://github.com/Zertuk/slotwo target=_blank>GitHub</a>. The original <a href=http://spacelichomega.zertukis.com target=_blank>Space Lich Omega is playable here</a>.</p><h3>Credits</h3><p><a href=http://www.zertukis.com target=_blank>Justin Forcier / Zertuk</a> : Development, Level & Location ASCII Art</p><p><a href=http://www.nanja.space target=_blank>Stephanie Olfert / Nanja</a> : Character ASCII Art</p><h3>Support</h3><p>Space Lich Omega 2 is ad free! If you want to help me with server costs, you can use PayPal or bitcoin.</p><p>1MC8N9xCgxkuVBVBAvL4ESwwdqn78GPg7W</p><form action=https://www.paypal.com/cgi-bin/webscr method=post target=_blank><input type=hidden name=cmd value=_donations> <input type=hidden name=business value=justinf91@gmail.com> <input type=hidden name=lc value=US> <input type=hidden name=item_name value="Justin Forcier Game Development"> <input type=hidden name=no_note value=0> <input type=hidden name=currency_code value=USD> <input type=hidden name=bn value=PP-DonationsBF:btn_donate_LG.gif:NonHostedGuest> <input class=noborder type=image src=https://www.paypalobjects.com/en_US/i/btn/btn_donate_LG.gif border=0 name=submit alt="PayPal - The safer, easier way to pay online!"> <img alt border=0 src=https://www.paypalobjects.com/en_US/i/scr/pixel.gif width=1 height=1></form></div>'),e.put("app/admin/admin.html",'<section class=mainbar><section class=matter><div class=container><div class=row><div class="widget wviolet"><div ht-widget-header title={{vm.title}}></div><div class="widget-content user"><h3>TODO: Implement Your Features</h3></div><div class=widget-foot><div class=clearfix></div></div></div></div></div></section></section>'),e.put("app/base-template/map.html",'<div ng-controller="MapController as vm"><h1>map controller</h1></div>'),e.put("app/book/book.html",'<div class="container borderbottom"><div ng-controller="BookController as vm"><h3>Enemies with dashed border have unfound loot!</h3><div class="enemyinfo book" ng-repeat="enemy in vm.enemyArray" ng-if="vm.enemyProgress[enemy.slug] > 0" ng-class="{looted : vm.enemyLooted[enemy.slug]}"><p class=enemyname>{{enemy.name}}</p><p class=enemydesc>{{enemy.desc}}</p><div class=healthbar><div class=healthbarinner style="width: {{vm.enemy.percent*100}}%"></div><p class=alignvert>{{enemy.health}} / {{enemy.maxHealth}}</p></div><div class=enemydamage ng-if="vm.currentEnemy.damage > 0"><p>Causes {{vm.enemy.damage}} damage at {{vm.enemy.attackSpeedText()}} speed.</p></div><p class=textcenter>Kill Count: {{vm.enemyProgress[enemy.slug]}}</p></div></div></div>'),e.put("app/core/404.html",'<section id=dashboard-view class=mainbar><section class=matter><div class=container><div class=row><div class=col-md-12><ul class=today-datas><li class=bred><div class=pull-left><i class="fa fa-warning"></i></div><div class="datas-text pull-right"><a><span class=bold>404</span></a>Page Not Found</div><div class=clearfix></div></li></ul></div></div><div class=row><div class="widget wblue"><div ht-widget-header title="Page Not Found" allow-collapse=true></div><div class="widget-content text-center text-info"><div class=container>No soup for you!</div></div><div class=widget-foot><div class=clearfix></div></div></div></div></div></section></section>'),e.put("app/dialogue/dialogue.html",'<div id=locationtext ng-controller="DialogueController as vm" ng-cloak><p class=text ng-if=vm.locationText>{{vm.locationText}}</p><p class=text ng-if=vm.currentDialogue.specialText>{{vm.currentDialogue.specialText()}}</p><button ng-if="vm.currentDialogue.continue && vm.currentDialogue.next" ng-click="vm.switchDialogue(vm.currentDialogue.next, vm.currentDialogue.master)">Continue</button> <button ng-if="vm.currentDialogue.continue && vm.currentDialogue.level === \'shroom\'" ng-click="vm.switchLevel(\'shroom\')">Continue</button> <button ng-if="vm.currentDialogue.continue && vm.currentDialogue.level === \'arena\'" ng-click="vm.switchLevel(\'arena\')">Continue</button> <button ng-if="vm.currentDialogue.continue && vm.currentDialogue.level === \'theEnd\'" ng-click="vm.switchLevel(\'theEnd\')">Continue</button> <button ng-if="!vm.currentDialogue.continue && button.active" ng-repeat="button in vm.currentDialogue.buttons" ng-click="vm.switchDialogue(button.next, button.master); button.special()">{{button.text}}</button> <button ng-if=vm.currentDialogue.end ng-click="vm.switchTemplate(\'app/end/end.html\')">Continue</button><form ng-if=vm.currentDialogue.input ng-submit=vm.passSubmit()><p class=text>{{vm.passText}}</p><input ng-model=vm.passcode ng-if=!vm.passComplete><button ng-if=!vm.passComplete type=submit>Enter</button></form></div>'),e.put("app/end/end.html",'<div class=container><pre class=textcenter>\r\n\r\n\r\n\r\n	   _____                          __    _      __       ____                                ___ \r\n	  / ___/____  ____ _________     / /   (_)____/ /_     / __ \\____ ___  ___  ____  ____ _   |__ \\\r\n	  \\__ \\/ __ \\/ __ `/ ___/ _ \\   / /   / / ___/ __ \\   / / / / __ `__ \\/ _ \\/ __ `/ __ `/   __/ /\r\n	 ___/ / /_/ / /_/ / /__/  __/  / /___/ / /__/ / / /  / /_/ / / / / / /  __/ /_/ / /_/ /   / __/ \r\n	/____/ .___/\\__,_/\\___/\\___/  /_____/_/\\___/_/ /_/   \\____/_/ /_/ /_/\\___/\\__, /\\__,_/   /____/ \r\n	    /_/                                                                  /____/                 \r\n	\r\n	</pre><h2 class=textcenter>Thank you for playing!</h2><p class=textcenter>Please share if you enjoyed.</p><ul class=share-buttons><li><a href="https://www.facebook.com/sharer/sharer.php?u=http%3A%2F%2Fspacelichomega2.com&t=" title="Share on Facebook" target=_blank onclick="window.open(\'https://www.facebook.com/sharer/sharer.php?u=\' + encodeURIComponent(document.URL) + \'&t=\' + encodeURIComponent(document.URL)); return false;"><img src=/images/Facebook.png></a></li><li><a href="https://twitter.com/intent/tweet?source=http%3A%2F%2Fspacelichomega2.com&text=:%20http%3A%2F%2Fspacelichomega2.com&via=zertuk" target=_blank title=Tweet onclick="window.open(\'https://twitter.com/intent/tweet?text=\' + encodeURIComponent(document.title) + \':%20\' + encodeURIComponent(document.URL)); return false;"><img src=../images/Twitter.png></a></li><li><a href="https://plus.google.com/share?url=http%3A%2F%2Fspacelichomega2.com" target=_blank title="Share on Google+" onclick="window.open(\'https://plus.google.com/share?url=\' + encodeURIComponent(document.URL)); return false;"><img src=../images/Google+.png></a></li><li><a href="http://www.tumblr.com/share?v=3&u=http%3A%2F%2Fspacelichomega2.com&t=&s=" target=_blank title="Post to Tumblr" onclick="window.open(\'http://www.tumblr.com/share?v=3&u=\' + encodeURIComponent(document.URL) + \'&t=\' + encodeURIComponent(document.title)); return false;"><img src=images/Tumblr.png></a></li></ul></div>'),e.put("app/inventory/inventory.html",'<div ng-controller="InventoryController as vm" class=container><div class="inventoryselect half"><div class=row><div class=itemdesc><h4>Weapon</h4><select ng-init="vm.equippedWeapon = vm.player.weapon.slug" ng-change=vm.equipWeapon() ng-model=vm.equippedWeapon ng-options="item[0][1].slug as item[0][1].name for item in vm.weapons"></select><p class="small italic">~ {{vm.player.weapon.desc}} ~</p><p>{{vm.player.weapon.damage}} Damage</p><p>{{vm.player.weapon.attackSpeedMessage()}}</p></div></div><div class=row><div class=itemdesc><h4>Armor</h4><select ng-init="vm.equippedArmor = vm.player.armor.slug" ng-change=vm.equipArmor() ng-model=vm.equippedArmor ng-options="item[0][1].slug as item[0][1].name for item in vm.armor"></select><p class="small italic">~ {{vm.player.armor.desc}} ~</p><p>{{vm.player.armor.armor*100}}% Armor</p><p ng-if=vm.player.armor.damageMult>{{(1 + (vm.player.armor.damageMult/100))}}x Damage dealt</p></div></div></div><div class="inventorylist half"><p>Potions: {{vm.itemDictionary.potion[1][1]}}</p><h3 class=inline>Other Items</h3><p class="italic inline">- These items effects are always active</p><div class=otheritem ng-repeat="item in vm.otherItems" ng-if="item[1][1] > 0"><div class=titleborder><h4 class="inline nomargin">{{item[0][1].name}}</h4><p class="small italic inline nomargin">- {{item[0][1].desc}}</p></div><p class=nomargin>{{item[0][1].message}}</p></div></div></div>'),e.put("app/level/level.html",'<div ng-controller="LevelController as vm"><div class="container leveloverflow borderbottom"><div id=levelwrap><pre class=levelrow ng-repeat="row in vm.currentLevel.ascii track by $index">{{row}}</pre></div></div><div class=container><div class=enemyinfo><div class=enemyplaceholder ng-if=!vm.currentEnemy></div><div ng-if=vm.currentEnemy><p class=enemyname>{{vm.currentEnemy.name}}</p><p class=enemydesc>{{vm.currentEnemy.desc}}</p><div class=healthbar><div class=healthbarinner style="width: {{vm.currentEnemy.percent*100}}%"></div><p class=alignvert>{{vm.currentEnemy.health}} / {{vm.currentEnemy.maxHealth}}</p></div><div class=enemydamage ng-if="vm.currentEnemy.damage > 0"><p>Causes {{vm.currentEnemy.damage}} damage at {{vm.currentEnemy.attackSpeedText()}} speed.</p></div></div></div><div class=playerabilities><div ng-click=vm.initPotion() class="button potioncd"><div class="abilitybg abilitycooldown"></div>Use Potion ({{vm.itemDictionary[\'potion\'][1][1]}})</div><div ng-repeat="ability in vm.abilities track by $index"><div ng-click=vm.activateAbility(ability.slug) class=button id={{ability.slug}} ng-if="ability.slug && ability.checkUnlock()"><div class=abilitybg></div>{{ability.name}}</div></div></div><div class=log id=log><p ng-repeat="message in vm.messageLog track by $index">{{message}}</p></div></div></div>'),e.put("app/main/main.html","<div class=\"container borderbottom\"><div id=locationwrap ng-class=\"{true: 'smallpre'}[vm.currentLocation.name === 'Map']\"></div><ng-include src=\"'app/dialogue/dialogue.html'\" ng-if=vm.currentLocation.specialText></ng-include><ng-include src=\"'app/shop/shop.html'\" ng-if=\"vm.currentLocation.name === 'The Shop'\"></ng-include></div>"),e.put("app/resources/resources.html",'<div ng-controller="ResourcesController as vm"><div class="container borderbottom"><div class="workerinfo actualworkers"><p>Available Workers: {{vm.resources.workers}}</p><div class=worker><button class=resourcecontrol ng-click="vm.assignWorker(\'lumberjacks\')">+</button> <button class=resourcecontrol ng-click="vm.removeWorker(\'lumberjacks\')">-</button><p>Lumberjacks: {{vm.resources.lumberjacks}}</p></div><div class=worker><button class=resourcecontrol ng-click="vm.assignWorker(\'farmers\')">+</button> <button class=resourcecontrol ng-click="vm.removeWorker(\'farmers\')">-</button><p>Farmers: {{vm.resources.farmers}}</p></div><div class=worker><button class=resourcecontrol ng-click="vm.assignWorker(\'miners\')">+</button> <button class=resourcecontrol ng-click="vm.removeWorker(\'miners\')">-</button><p>Miners: {{vm.resources.miners}}</p></div><div class=worker><button class=resourcecontrol ng-click="vm.assignWorker(\'overseers\')">+</button> <button class=resourcecontrol ng-click="vm.removeWorker(\'overseers\')">-</button><p>Overseers: {{vm.resources.overseers}}</p></div></div><div class="workerinfo margintop45"><div class=worker><p class=info>Produces {{vm.workers.lumberjacks.wood}} wood at the cost of {{-vm.workers.lumberjacks.food}} food.</p></div><div class=worker><p class=info>Produces {{vm.workers.farmers.food}} food.</p></div><div class=worker><p class=info>Produces {{vm.workers.miners.ore}} ore at the cost of {{-vm.workers.miners.wood}} wood and {{-vm.workers.miners.food}} food.</p></div><div class=worker><p class=info>Causes workers to be more productive at the cost of {{-vm.workers.overseers.food}} food.</p></div></div></div><div class="container borderbottom"><div class=half><div class=workerinfo><div class=worker><p>Food: {{vm.resources.food}}</p></div><div class=worker><p>Ore: {{vm.resources.ore}}</p></div><div class=worker><p>Wood: {{vm.resources.wood}}</p></div></div><div class=workerinfo><div class=worker><p class=info>{{vm.resources.foodRate}}/s</p></div><div class=worker><p class=info>{{vm.resources.oreRate}}/s</p></div><div class=worker><p class=info>{{vm.resources.woodRate}}/s</p></div></div></div><div class=half><div ng-repeat="item in vm.craftables" ng-if=item.active><div class=workerinfo><div class=worker><button class=craft ng-click=vm.craft(item.key)>{{item.text}}</button></div></div><div class=workerinfo><div class=worker><p>{{item.cost}}</p></div></div></div><div class=campfire ng-if="vm.checkActive(\'campfire\')"><div class=workerinfo><div class=worker><div class=button ng-click=vm.fuelFire()><div class=bg></div>Add wood to fire</div></div></div><div class=workerinfo><div class=worker><p>Can attract wanderers when lit. Takes 1 to 2 wood to ligt.</p></div></div></div><div class=forge><div class=workerinfo><div class=worker><button ng-click=vm.toggleForge()>{{vm.forgeMessage}}</button></div></div><div class=workerinfo><div class=worker><p>Converts 5 ore to 25 gold when active.</p></div></div></div></div></div></div>'),e.put("app/shop/shop.html",'<div id=locationtext><p>Welcome! Looking to shop? Here is my current inventory.</p><div ng-repeat="item in vm.itemList[0] track by $index" class=shoprow ng-if="vm.itemDictionary[item.slug][1][1] === 0 || item.slug === \'potion\'"><div class=half><button ng-click=vm.buyItem(item)>{{item.name}}</button></div><div class=half><p class="nomargin inline">{{item.price}} gold</p><p class="nomargin inline" ng-if="item.slug === \'potion\'">|</p><p class="nomargin inline small" ng-if="item.slug === \'potion\'">{{vm.itemDictionary.potion[1][1]}} Owned</p></div></div></div>'),e.put("app/town/town.html",'<div ng-controller="TownController as vm"><h1>town controller</h1><table><tr><th>Structure</th><th>Amount</th></tr><tr ng-repeat="item in vm.structures"><td>{{item}}</td><td>{{item}}</td></tr></table></div>'),e.put("app/widgets/widget-header.html",'<div class=widget-head><div class="page-title pull-left">{{title}}</div><small class=page-title-subtle ng-show=subtitle>({{subtitle}})</small><div class="widget-icons pull-right"></div><small class="pull-right page-title-subtle" ng-show=rightText>{{rightText}}</small><div class=clearfix></div></div>')}]);